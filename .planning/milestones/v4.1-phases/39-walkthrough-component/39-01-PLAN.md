---
phase: 39-walkthrough-component
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/components/portfolio/walkthrough-section.tsx
autonomous: true
requirements:
  - WALK-01
  - WALK-02
  - WALK-03
  - WALK-04

must_haves:
  truths:
    - "Numbered callout circles appear visually pinned at defined pixel coordinates on top of each screenshot"
    - "A legend below each screenshot renders numbered entries — each matching an overlay circle — with a short label and one-sentence explanation"
    - "Component background is #0a0a0a, callout circles and step numbers use --matrix-green, labels use a monospace font"
    - "Section animates in on scroll using AnimateIn and StaggerContainer; no animation occurs when prefers-reduced-motion is active"
    - "WalkthroughSection accepts typed props and is reusable for both TeamFlow and DevCollab case studies"
  artifacts:
    - path: "apps/web/components/portfolio/walkthrough-section.tsx"
      provides: "WalkthroughSection component with callout overlay circles, legend, Matrix styling, and AnimateIn scroll-reveal"
      exports:
        - WalkthroughSection
        - WalkthroughStep (type)
        - WalkthroughScreenshot (type)
  key_links:
    - from: "apps/web/components/portfolio/walkthrough-section.tsx"
      to: "apps/web/components/portfolio/animate-in.tsx"
      via: "named import { AnimateIn }"
      pattern: "import.*AnimateIn.*animate-in"
    - from: "apps/web/components/portfolio/walkthrough-section.tsx"
      to: "apps/web/components/portfolio/stagger-container.tsx"
      via: "named import { StaggerContainer, StaggerItem }"
      pattern: "import.*StaggerContainer.*stagger-container"
    - from: "callout circle element"
      to: "screenshot image wrapper"
      via: "position: absolute on circle, position: relative on wrapper"
      pattern: "absolute.*left-\\[.*px\\].*top-\\[.*px\\]"
---

<objective>
Create the `WalkthroughSection` React component: a reusable section that renders any set of screenshots with numbered callout overlay circles, a matching legend, Matrix styling, and scroll-reveal animations.

Purpose: Give recruiters a visual narrative of each SaaS app workflow without requiring a live demo session.
Output: `apps/web/components/portfolio/walkthrough-section.tsx` — fully typed, styled, animated, and ready to drop into both TeamFlow and DevCollab case study pages.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key types and contracts the executor needs. Extracted from codebase. -->

From apps/web/src/data/screenshots-manifest.ts:
```typescript
export interface Screenshot {
  src: string
  width: number
  height: number
  alt: string
  label: string  // short label for callout legend
}

export const TEAMFLOW_SCREENSHOTS: Screenshot[]   // 5 items
export const DEVCOLLAB_SCREENSHOTS: Screenshot[]  // 5 items
```

From apps/web/components/portfolio/animate-in.tsx:
```typescript
'use client'
// import { motion, useReducedMotion } from 'motion/react'  ← correct import path
interface AnimateInProps {
  children: ReactNode
  className?: string
  delay?: number
  as?: 'div' | 'section' | 'article'
}
export function AnimateIn({ children, className, delay = 0, as = 'div' }: AnimateInProps)
// When prefersReducedMotion=true → renders plain <div> (no motion, no opacity:0)
// When false → motion[as] with initial={opacity:0, y:24}, whileInView={opacity:1, y:0},
//              viewport={once:true, amount:0.2}, transition={duration:0.5, ease:'easeOut', delay}
```

From apps/web/components/portfolio/stagger-container.tsx:
```typescript
'use client'
// import { motion, useReducedMotion } from 'motion/react'
export function StaggerContainer({ children, className }: ContainerProps)
// When prefersReducedMotion=true → plain <div>
// When false → motion.div with staggerChildren:0.15, delayChildren:0.1,
//              whileInView="visible", viewport={once:true, amount:0.1}

export function StaggerItem({ children, className }: ContainerProps)
// motion.div variants={itemVariants} — opacity:0→1, y:24→0
```

CSS tokens from apps/web/app/globals.css:
```css
--matrix-green: #00FF41;          /* canonical accent — callout circles, step numbers */
--matrix-green-dim: #00CC33;      /* dimmer green for hover states */
--matrix-green-ghost: #00FF4120;  /* ~12% opacity glow background */
--matrix-green-border: #00FF4133; /* ~20% opacity border tint */
--matrix-terminal: #00FF41;       /* full bright — metric numbers */
/* Background: #0a0a0a (hardcoded, not a CSS var) */
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define WalkthroughSection types and create component skeleton</name>
  <files>apps/web/components/portfolio/walkthrough-section.tsx</files>
  <action>
Create `apps/web/components/portfolio/walkthrough-section.tsx` with the following type exports and component skeleton. This file starts as the interface contract before implementation.

Types to export:

```typescript
export interface WalkthroughStep {
  /** The step number shown in the callout circle (1-based) */
  number: number
  /** Pixel offset from the LEFT of the screenshot image (e.g. 120) */
  x: number
  /** Pixel offset from the TOP of the screenshot image (e.g. 80) */
  y: number
  /** Short label shown bold in the legend (e.g. "Kanban Board") */
  label: string
  /** One-sentence explanation shown in the legend */
  explanation: string
}

export interface WalkthroughScreenshot {
  /** Screenshot metadata — src, width, height, alt (from Screenshot interface in screenshots-manifest.ts) */
  src: string
  width: number
  height: number
  alt: string
  /** Callout circles to overlay on this screenshot */
  steps: WalkthroughStep[]
}

export interface WalkthroughSectionProps {
  /** Section heading (e.g. "App Walkthrough") */
  title?: string
  /** Array of screenshots each with their callout step definitions */
  screenshots: WalkthroughScreenshot[]
}
```

Mark the file as `'use client'` — it uses AnimateIn and StaggerContainer which are client components.
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | grep -E "walkthrough-section|error" | head -20</automated>
  </verify>
  <done>File exists with WalkthroughStep, WalkthroughScreenshot, WalkthroughSectionProps exported. TypeScript compiles without errors in walkthrough-section.tsx.</done>
</task>

<task type="auto">
  <name>Task 2: Implement component body — screenshot + callout circles + legend</name>
  <files>apps/web/components/portfolio/walkthrough-section.tsx</files>
  <action>
Complete the `WalkthroughSection` implementation in the same file. The component renders each screenshot vertically with numbered overlay circles and a legend below.

Implementation requirements:

**Section wrapper:**
- Background `#0a0a0a`, `py-16 px-4`, full-width section
- Optional heading using `title` prop: `<h2>` with `--matrix-green` color, monospace font, `text-2xl font-mono mb-10`
- Wrap entire section in `<AnimateIn as="section">` for scroll-reveal entrance

**Per-screenshot layout (staggered):** Wrap all screenshots in `<StaggerContainer>`, each screenshot in `<StaggerItem>`:
- Outer div: `mb-16` spacing between screenshots
- Image wrapper: `position: relative; display: inline-block; width: 100%` — the `relative` is required so `absolute` callout circles pin correctly
- Use `<Image>` from `next/image` with `src`, `alt`, `width`, `height` from the WalkthroughScreenshot, and `className="w-full h-auto rounded-lg border border-[var(--matrix-green-border)]"`

**Callout circles (WALK-01):** For each step in `screenshot.steps`:
- Render a `<span>` with `position: absolute`, `left: {step.x}px`, `top: {step.y}px` (CSS inline style, NOT Tailwind for exact pixel values)
- Circle: 28px × 28px, `border-radius: 50%`, background `var(--matrix-green)`, color `#0a0a0a` (dark text on bright circle)
- Display: flex, center-center, font `font-mono font-bold text-sm`
- `aria-label`: `"Step {step.number}: {step.label}"` for accessibility (WALK-04 pre-req for Phase 40)
- Render step.number inside the circle

**Legend (WALK-02):** Below each image wrapper (sibling div, NOT inside the relative wrapper):
- `mt-4 space-y-2` container
- For each step, one row: flex, gap-3, align-items start
  - Number badge: same circle style as overlay but smaller (22px × 22px), shrink-0
  - Label: `<span className="font-mono font-bold text-sm" style={{ color: 'var(--matrix-green)' }}>` — step.label
  - Explanation: `<span className="text-sm text-slate-400 ml-1">` — step.explanation

**Matrix styling (WALK-03):**
- Background `#0a0a0a` on section wrapper
- `--matrix-green` (`#00FF41`) for callout circles and step number badges
- `font-mono` class for all labels
- Do NOT use any purple tones anywhere

Complete example structure:
```tsx
'use client'

import Image from 'next/image'
import { AnimateIn } from '@/components/portfolio/animate-in'
import { StaggerContainer, StaggerItem } from '@/components/portfolio/stagger-container'

// ... types from Task 1 ...

export function WalkthroughSection({ title, screenshots }: WalkthroughSectionProps) {
  return (
    <AnimateIn as="section" className="py-16 px-4" style={{ background: '#0a0a0a' }}>
      {title && (
        <h2 className="font-mono text-2xl font-bold mb-10" style={{ color: 'var(--matrix-green)' }}>
          {title}
        </h2>
      )}
      <StaggerContainer className="space-y-0">
        {screenshots.map((shot, idx) => (
          <StaggerItem key={idx}>
            <div className="mb-16">
              {/* Image + overlay */}
              <div className="relative w-full">
                <Image
                  src={shot.src}
                  alt={shot.alt}
                  width={shot.width}
                  height={shot.height}
                  className="w-full h-auto rounded-lg border border-[var(--matrix-green-border)]"
                />
                {shot.steps.map((step) => (
                  <span
                    key={step.number}
                    aria-label={`Step ${step.number}: ${step.label}`}
                    style={{
                      position: 'absolute',
                      left: step.x,
                      top: step.y,
                      width: 28,
                      height: 28,
                      borderRadius: '50%',
                      background: 'var(--matrix-green)',
                      color: '#0a0a0a',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      fontFamily: 'monospace',
                      fontWeight: 'bold',
                      fontSize: '0.75rem',
                      userSelect: 'none',
                      zIndex: 10,
                    }}
                  >
                    {step.number}
                  </span>
                ))}
              </div>
              {/* Legend */}
              <div className="mt-4 space-y-2">
                {shot.steps.map((step) => (
                  <div key={step.number} className="flex gap-3 items-start">
                    <span
                      aria-hidden="true"
                      style={{
                        flexShrink: 0,
                        width: 22,
                        height: 22,
                        borderRadius: '50%',
                        background: 'var(--matrix-green)',
                        color: '#0a0a0a',
                        display: 'inline-flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        fontFamily: 'monospace',
                        fontWeight: 'bold',
                        fontSize: '0.7rem',
                      }}
                    >
                      {step.number}
                    </span>
                    <p className="text-sm leading-relaxed">
                      <span className="font-mono font-bold" style={{ color: 'var(--matrix-green)' }}>
                        {step.label}
                      </span>
                      <span className="text-slate-400 ml-2">{step.explanation}</span>
                    </p>
                  </div>
                ))}
              </div>
            </div>
          </StaggerItem>
        ))}
      </StaggerContainer>
    </AnimateIn>
  )
}
```

**Reduced motion:** AnimateIn and StaggerContainer/StaggerItem already handle `prefers-reduced-motion` — they render plain divs with no opacity or y-transform when the user prefers reduced motion. No additional code needed in WalkthroughSection itself.
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | grep -E "error TS|walkthrough" | head -20 && echo "--- lint ---" && npx eslint apps/web/components/portfolio/walkthrough-section.tsx --max-warnings 0 2>&1 | tail -5</automated>
  </verify>
  <done>
- TypeScript compiles without errors
- ESLint passes with 0 warnings
- WalkthroughSection component exported with correct props
- Callout circles use position:absolute with inline pixel styles
- Legend entries use --matrix-green color and font-mono class
- AnimateIn wraps the section, StaggerContainer/StaggerItem wrap each screenshot
- No purple colors anywhere in the file
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify component integration with a quick smoke-test import</name>
  <files>apps/web/components/portfolio/walkthrough-section.tsx</files>
  <action>
Run a TypeScript compilation check that confirms the component can be imported correctly with real data from the screenshots manifest. Do NOT modify any case study pages in this task — that is Phase 40. Only verify the component itself.

Write a temporary type-check assertion by verifying the component typechecks against a sample usage shape. Run:

```bash
cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json
```

Also verify the screenshots manifest is importable alongside the component types (no type conflicts between `Screenshot` from manifest and `WalkthroughScreenshot` from the component). The key difference: `WalkthroughScreenshot` adds a `steps: WalkthroughStep[]` field on top of the manifest's `Screenshot` shape. No conflicts expected since they are separate types.

If TypeScript compilation passes clean, the component is ready for Phase 40 integration.

Run the Next.js build check for the web app to confirm no build errors:
```bash
cd /home/doctor/fernandomillan && npx turbo build --filter=web 2>&1 | tail -20
```

If the build succeeds, the component file is valid and ready.
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | grep -c "error TS" || true</automated>
  </verify>
  <done>
- `tsc --noEmit` outputs 0 TypeScript errors
- Next.js build succeeds (or has 0 new errors introduced by walkthrough-section.tsx)
- WalkthroughSection, WalkthroughStep, WalkthroughScreenshot are all exported from the component file
- Component is ready to be imported by Phase 40 case study pages
  </done>
</task>

</tasks>

<verification>
After all 3 tasks complete:

1. File exists: `apps/web/components/portfolio/walkthrough-section.tsx`
2. TypeScript: `cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json` — zero errors
3. Exports check: `grep -E "^export (function|interface|type)" apps/web/components/portfolio/walkthrough-section.tsx` — must show WalkthroughSection, WalkthroughStep, WalkthroughScreenshot
4. Matrix green used: `grep -n "matrix-green" apps/web/components/portfolio/walkthrough-section.tsx` — must return matches
5. AnimateIn used: `grep -n "AnimateIn" apps/web/components/portfolio/walkthrough-section.tsx` — must return matches
6. StaggerContainer used: `grep -n "StaggerContainer" apps/web/components/portfolio/walkthrough-section.tsx` — must return matches
7. No purple: `grep -i "purple\|#800080\|#8b00ff\|violet" apps/web/components/portfolio/walkthrough-section.tsx` — must return nothing
8. Absolute positioning: `grep -n "position.*absolute\|absolute.*position" apps/web/components/portfolio/walkthrough-section.tsx` — must return matches (callout circles)
</verification>

<success_criteria>
- `WalkthroughSection` component exists at `apps/web/components/portfolio/walkthrough-section.tsx`
- Types `WalkthroughStep` and `WalkthroughScreenshot` are exported from the same file
- Numbered callout circles render at exact pixel coordinates (position:absolute with inline x/y styles) — WALK-01 met
- Legend renders numbered entries matching overlay circles, each with label + explanation — WALK-02 met
- Background #0a0a0a, --matrix-green accents on circles and labels, font-mono — WALK-03 met
- AnimateIn wraps the section; StaggerContainer/StaggerItem stagger each screenshot entry — WALK-04 met (reduced-motion handled by AnimateIn/StaggerContainer internally)
- Zero TypeScript errors, zero ESLint warnings
- Component is self-contained and ready for Phase 40 integration into both case study pages
</success_criteria>

<output>
After completion, create `.planning/phases/39-walkthrough-component/39-01-SUMMARY.md` following the summary template at `/home/doctor/.claude/get-shit-done/templates/summary.md`.
</output>
