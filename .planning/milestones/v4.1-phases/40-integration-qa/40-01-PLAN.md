---
phase: 40-integration-qa
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/data/walkthrough-data.ts
  - apps/web/lighthouserc.json
  - apps/web/lighthouserc.production.json
autonomous: true
requirements: [INTG-01, INTG-02, QA-01, QA-02]

must_haves:
  truths:
    - "A typed walkthrough-data.ts file exports TEAMFLOW_WALKTHROUGH_SCREENSHOTS and DEVCOLLAB_WALKTHROUGH_SCREENSHOTS as WalkthroughScreenshot[]"
    - "Each WalkthroughScreenshot has 2-3 callout steps with pixel coordinates, label, and explanation"
    - "Lighthouse CI accessibility assertion is set to 'error' (not 'warn') in both lighthouserc files"
    - "TypeScript compiles the data file with zero errors"
  artifacts:
    - path: "apps/web/src/data/walkthrough-data.ts"
      provides: "TEAMFLOW_WALKTHROUGH_SCREENSHOTS and DEVCOLLAB_WALKTHROUGH_SCREENSHOTS typed arrays"
      exports: ["TEAMFLOW_WALKTHROUGH_SCREENSHOTS", "DEVCOLLAB_WALKTHROUGH_SCREENSHOTS"]
    - path: "apps/web/lighthouserc.json"
      provides: "Accessibility gate hardened to error"
      contains: "\"error\""
    - path: "apps/web/lighthouserc.production.json"
      provides: "Accessibility gate hardened to error"
      contains: "\"error\""
  key_links:
    - from: "apps/web/src/data/walkthrough-data.ts"
      to: "apps/web/components/portfolio/walkthrough-section.tsx"
      via: "WalkthroughScreenshot interface import"
      pattern: "import.*WalkthroughScreenshot.*walkthrough-section"
---

<objective>
Create the walkthrough data file supplying real callout definitions for both apps, and harden the Lighthouse CI accessibility gate.

Purpose: Phase 40 integration needs typed callout step data before either case study page can import WalkthroughSection. The Lighthouse accessibility gate must be an error (not a warning) per user decisions.
Output: apps/web/src/data/walkthrough-data.ts with 5 screenshots x 2-3 callout steps per app, and both lighthouserc files updated.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-integration-qa/40-CONTEXT.md

# Prior phase summary for interface context
@.planning/phases/39-walkthrough-component/39-01-SUMMARY.md
</context>

<interfaces>
<!-- Executor must import these and implement against them. No codebase exploration needed. -->

From apps/web/components/portfolio/walkthrough-section.tsx:
```typescript
export interface WalkthroughStep {
  /** The step number shown in the callout circle (1-based) */
  number: number
  /** Pixel offset from the LEFT of the screenshot image (e.g. 120) */
  x: number
  /** Pixel offset from the TOP of the screenshot image (e.g. 80) */
  y: number
  /** Short label shown bold in the legend (e.g. "Kanban Board") */
  label: string
  /** One-sentence explanation shown in the legend */
  explanation: string
}

export interface WalkthroughScreenshot {
  src: string
  width: number
  height: number
  alt: string
  /** Callout circles to overlay on this screenshot */
  steps: WalkthroughStep[]
}
```

From apps/web/src/data/screenshots-manifest.ts (reuse alt text verbatim):
```typescript
// TEAMFLOW screenshots (alt text to reuse):
// teamflow-kanban: "TeamFlow Kanban board showing task columns with drag-and-drop cards organized by status: To Do, In Progress, and Done"
// teamflow-presence: "TeamFlow real-time presence indicators showing team members online status with green activity dots"
// teamflow-task-modal: "TeamFlow task creation modal with fields for title, description, assignee selection, and priority level"
// teamflow-rbac: "TeamFlow team management page showing role-based access control with member roles: Owner, Admin, and Member"
// teamflow-audit-log: "TeamFlow audit log displaying a chronological history of team actions with timestamps and actor names"

// DEVCOLLAB screenshots (alt text to reuse):
// devcollab-workspace: "DevCollab workspace overview showing the main activity feed with recent messages, posts, and collaboration activity"
// devcollab-code-snippet: "DevCollab code snippet post with Shiki syntax highlighting rendering a TypeScript function in color-coded blocks"
// devcollab-thread: "DevCollab threaded discussion panel showing a message reply chain with @mention highlighting for referenced team members"
// devcollab-search: "DevCollab Cmd+K search modal overlay showing full-text search results across messages, code snippets, and workspaces"
// devcollab-activity: "DevCollab activity feed and notification bell showing recent workspace events, mentions, and reply notifications"
```
</interfaces>

<tasks>

<task type="auto">
  <name>Task 1: Create walkthrough-data.ts with typed callout step definitions</name>
  <files>apps/web/src/data/walkthrough-data.ts</files>
  <action>
Create `apps/web/src/data/walkthrough-data.ts`. Import `WalkthroughScreenshot` from `@/components/portfolio/walkthrough-section`. Export `TEAMFLOW_WALKTHROUGH_SCREENSHOTS` and `DEVCOLLAB_WALKTHROUGH_SCREENSHOTS` as `WalkthroughScreenshot[]`.

Reuse alt text strings verbatim from screenshots-manifest.ts (do not rewrite them). Use `src` paths from `/screenshots/` and `width: 1280, height: 800` for all.

For each screenshot, define 2-3 callout steps with x/y pixel coordinates derived from where the feature appears on a 1280x800 screenshot. The coordinate system is pixels from the top-left of the image — callout circles are 28x28px.

**TEAMFLOW callout guidance (derive coordinates logically):**
- `teamflow-kanban.png`: Step 1 "Kanban Columns" — columns area, around x:200, y:120; Step 2 "Drag-and-Drop" — a card, around x:200, y:280; Step 3 "Task Status" — status header, around x:640, y:120
- `teamflow-presence.png`: Step 1 "Online Indicators" — presence dots area, around x:80, y:200; Step 2 "Live Updates" — activity area, around x:640, y:300
- `teamflow-task-modal.png`: Step 1 "Task Title" — title field, around x:400, y:220; Step 2 "Assignee Selection" — assignee dropdown, around x:400, y:360; Step 3 "Priority Level" — priority field, around x:400, y:440
- `teamflow-rbac.png`: Step 1 "Member Roles" — role column, around x:640, y:200; Step 2 "Owner Badge" — owner row, around x:640, y:260; Step 3 "Access Control" — admin row, around x:640, y:320
- `teamflow-audit-log.png`: Step 1 "Action Log" — log entries, around x:200, y:200; Step 2 "Timestamps" — timestamp column, around x:100, y:300; Step 3 "Actor Names" — actor column, around x:400, y:300

Each step explanation must be one sentence describing what that feature demonstrates. Labels should be short (2-4 words).

**DEVCOLLAB callout guidance:**
- `devcollab-workspace.png`: Step 1 "Activity Feed" — feed area, around x:640, y:200; Step 2 "Workspace Posts" — post list, around x:640, y:340
- `devcollab-code-snippet.png`: Step 1 "Shiki Highlighting" — code block, around x:640, y:300; Step 2 "Language Badge" — language indicator, around x:200, y:200; Step 3 "Code Content" — syntax-highlighted code, around x:640, y:400
- `devcollab-thread.png`: Step 1 "Reply Chain" — thread, around x:640, y:280; Step 2 "@Mention Highlight" — mention, around x:640, y:360; Step 3 "Thread Depth" — indented replies, around x:740, y:420
- `devcollab-search.png`: Step 1 "Search Modal" — modal overlay, around x:640, y:200; Step 2 "Full-Text Results" — results list, around x:640, y:360; Step 3 "Cmd+K Shortcut" — search input, around x:640, y:240
- `devcollab-activity.png`: Step 1 "Notification Bell" — bell icon area, around x:1200, y:40; Step 2 "Unread Badge" — badge counter, around x:1210, y:30; Step 3 "Event Feed" — activity items, around x:640, y:300

File must have zero TypeScript errors (types are exact match to WalkthroughScreenshot interface).
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | grep -E "walkthrough-data|error TS" | head -20; echo "Exit: $?"</automated>
  </verify>
  <done>File exists at apps/web/src/data/walkthrough-data.ts. Exports TEAMFLOW_WALKTHROUGH_SCREENSHOTS (5 items, 2-3 steps each) and DEVCOLLAB_WALKTHROUGH_SCREENSHOTS (5 items, 2-3 steps each). TypeScript compiles with no errors on this file.</done>
</task>

<task type="auto">
  <name>Task 2: Harden Lighthouse CI accessibility gate to error in both configs</name>
  <files>apps/web/lighthouserc.json, apps/web/lighthouserc.production.json</files>
  <action>
In `apps/web/lighthouserc.json`, change the accessibility assertion from `["warn", { "minScore": 1 }]` to `["error", { "minScore": 1 }]`.

In `apps/web/lighthouserc.production.json`, make the same change: `["warn", { "minScore": 1 }]` → `["error", { "minScore": 1 }]`.

The performance assertion stays as-is: `["error", { "minScore": 0.9 }]` — do not touch it.

Per user decision from 40-CONTEXT.md: "Upgrade accessibility assertion from 'warn' to 'error' in lighthouserc.json."
  </action>
  <verify>
    <automated>grep -n "accessibility" /home/doctor/fernandomillan/apps/web/lighthouserc.json /home/doctor/fernandomillan/apps/web/lighthouserc.production.json</automated>
  </verify>
  <done>Both lighthouserc files have `"categories:accessibility": ["error", { "minScore": 1 }]`. Neither file has the word "warn" next to "accessibility".</done>
</task>

</tasks>

<verification>
- `apps/web/src/data/walkthrough-data.ts` exists and exports both named arrays
- TypeScript compilation passes with no errors on the data file
- Both `lighthouserc.json` and `lighthouserc.production.json` have accessibility set to `"error"`
- No `"warn"` appears next to accessibility in either lighthouse config
</verification>

<success_criteria>
- TEAMFLOW_WALKTHROUGH_SCREENSHOTS: 5 WalkthroughScreenshot objects, each with 2-3 WalkthroughStep entries
- DEVCOLLAB_WALKTHROUGH_SCREENSHOTS: 5 WalkthroughScreenshot objects, each with 2-3 WalkthroughStep entries
- All alt text strings match verbatim what's in screenshots-manifest.ts
- Both lighthouserc files: accessibility = "error", minScore: 1
</success_criteria>

<output>
After completion, create `.planning/phases/40-integration-qa/40-01-SUMMARY.md`
</output>
