---
phase: 35-full-qa-audit-and-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/app/(portfolio)/projects/teamflow/page.tsx
  - apps/web/e2e/portfolio/navigation.spec.ts
autonomous: true
requirements:
  - QA-03

must_haves:
  truths:
    - "TeamFlow 'View Live Demo' CTA on fernandomillan.me/projects/teamflow navigates to teamflow.fernandomillan.me (not a 404)"
    - "DevCollab 'View Live Demo' CTA on fernandomillan.me/projects/devcollab navigates to devcollab.fernandomillan.me/w/devcollab-demo"
    - "All 5 portfolio nav links resolve (/, /about, /projects, /resume, /contact)"
    - "All 5 portfolio footer links resolve (/, /about, /projects, /contact, https://github.com/fmillanjs)"
    - "Playwright navigation spec passes with CTA link assertions included"
  artifacts:
    - path: "apps/web/app/(portfolio)/projects/teamflow/page.tsx"
      provides: "TeamFlow case study with absolute production CTA URLs"
      contains: "https://teamflow.fernandomillan.me"
    - path: "apps/web/e2e/portfolio/navigation.spec.ts"
      provides: "Automated link resolution test including CTA hrefs"
      exports: ["navigation tests", "CTA href assertions"]
  key_links:
    - from: "apps/web/app/(portfolio)/projects/teamflow/page.tsx"
      to: "https://teamflow.fernandomillan.me"
      via: "href attribute on View Live Demo anchor"
      pattern: "href.*teamflow\\.fernandomillan\\.me"
    - from: "apps/web/e2e/portfolio/navigation.spec.ts"
      to: "fernandomillan.me/projects/teamflow"
      via: "page.goto + getAttribute('href') assertion"
      pattern: "toContain.*teamflow\\.fernandomillan\\.me"
---

<objective>
Fix the confirmed TeamFlow CTA link bug (href="/teams" 404s on fernandomillan.me) and extend the Playwright navigation spec to assert absolute production URLs on all case study CTAs. This is the only known code-level portfolio link bug identified from source review.

Purpose: A recruiter clicking "View Live Demo" on the TeamFlow case study currently lands on a 404. This is a 30-second fix with an outsized recruiter impact.
Output: Fixed TeamFlow page committed + CI/CD triggered. Extended Playwright spec asserting correct CTA hrefs to prevent regression.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/35-full-qa-audit-and-fixes/35-RESEARCH.md

<interfaces>
<!-- Key interfaces the executor needs. Extracted from codebase. -->

From apps/web/app/(portfolio)/projects/teamflow/page.tsx (lines 53-66):
The file currently has TWO broken relative href="/teams" occurrences:
  - Line 55: The hero section "View Live Demo" anchor: `href="/teams"`
  - Line 535: The bottom CTA section "Try TeamFlow Now": `href="/teams"`
Both must be changed to: `href="https://teamflow.fernandomillan.me"`

Also line 65: `href="https://github.com/fmillanjs/fmjs"` — the GitHub source link.
Research flagged this as potentially wrong repo. The correct GitHub org is fmillanjs.
DevCollab page uses the same href="https://github.com/fmillanjs/fmjs" at line 67.
Leave GitHub links as-is — do not change without confirmation (out of scope for QA-03).

From apps/web/app/(portfolio)/projects/devcollab/page.tsx (line 57):
```tsx
href={`${DEVCOLLAB_URL}/w/devcollab-demo`}
```
This is already correct (uses the DEVCOLLAB_URL env var resolving to devcollab.fernandomillan.me).

From apps/web/e2e/portfolio/navigation.spec.ts:
Existing spec tests portfolio navigation (page loads, nav links). Extend it with:
- Navigate to /projects/teamflow → find "View Live Demo" link → assert href contains "teamflow.fernandomillan.me"
- Navigate to /projects/devcollab → find "View Live Demo" link → assert href contains "devcollab.fernandomillan.me"

From apps/web/components/portfolio/nav.tsx:
navLinks = ['/', '/about', '/projects', '/resume', '/contact'] — all internal, all correct.

From apps/web/components/portfolio/footer.tsx:
Footer links: /, /about, /projects, /contact (internal) + https://github.com/fmillanjs (external).
All correct. No audit action needed.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix TeamFlow case study CTA links (relative → absolute production URLs)</name>
  <files>apps/web/app/(portfolio)/projects/teamflow/page.tsx</files>
  <action>
    In apps/web/app/(portfolio)/projects/teamflow/page.tsx, find ALL occurrences of `href="/teams"` and replace each with `href="https://teamflow.fernandomillan.me"`.

    There are exactly two occurrences:
    1. Line ~55: Hero section "View Live Demo" anchor tag
    2. Line ~535: Bottom CTA "Try TeamFlow Now" anchor tag

    Both must be absolute production URLs. The `target="_blank" rel="noopener noreferrer"` attributes should remain unchanged.

    Do NOT change the GitHub source link (href="https://github.com/fmillanjs/fmjs") — leave as-is.
    Do NOT change any other content, copy, or styling.

    After editing, commit immediately:
    ```bash
    git add apps/web/app/\(portfolio\)/projects/teamflow/page.tsx
    git commit -m "fix(portfolio): fix TeamFlow live demo CTA to absolute production URL"
    git push origin main
    ```
  </action>
  <verify>
    ```bash
    grep -n 'href="/teams"' /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/teamflow/page.tsx
    ```
    Must return zero results. Then:
    ```bash
    grep -n 'href="https://teamflow.fernandomillan.me"' /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/teamflow/page.tsx
    ```
    Must return 2 results (hero CTA + bottom CTA).
  </verify>
  <done>Zero occurrences of href="/teams" remain in teamflow/page.tsx. Both CTA anchors point to https://teamflow.fernandomillan.me. Committed and pushed.</done>
</task>

<task type="auto">
  <name>Task 2: Extend Playwright navigation spec with CTA href assertions</name>
  <files>apps/web/e2e/portfolio/navigation.spec.ts</files>
  <action>
    Read the existing apps/web/e2e/portfolio/navigation.spec.ts file first to understand its current structure and base URL configuration.

    Add a new test block (or extend an existing describe block) that asserts:
    1. On /projects/teamflow: the "View Live Demo" link href contains "teamflow.fernandomillan.me"
    2. On /projects/devcollab: the "View Live Demo" link href contains "devcollab.fernandomillan.me"

    Use Playwright's `getAttribute('href')` or `toHaveAttribute` assertion. Use `page.getByRole('link', { name: /view live demo/i })` for semantic selection.

    The Playwright config already has the production base URL configured, or use the full production URL in the test.

    Example pattern to add:
    ```typescript
    test('case study live demo CTAs point to production URLs', async ({ page }) => {
      // TeamFlow case study CTA
      await page.goto('https://fernandomillan.me/projects/teamflow');
      const teamflowDemo = page.getByRole('link', { name: /view live demo/i }).first();
      const teamflowHref = await teamflowDemo.getAttribute('href');
      expect(teamflowHref).toContain('teamflow.fernandomillan.me');

      // DevCollab case study CTA
      await page.goto('https://fernandomillan.me/projects/devcollab');
      const devCollabDemo = page.getByRole('link', { name: /view live demo/i }).first();
      const devCollabHref = await devCollabDemo.getAttribute('href');
      expect(devCollabHref).toContain('devcollab.fernandomillan.me');
    });
    ```

    After adding the test, run it against production to confirm both assertions pass:
    ```bash
    cd /home/doctor/fernandomillan/apps/web && npx playwright test e2e/portfolio/navigation.spec.ts --project=chromium 2>&1 | tail -20
    ```

    Commit:
    ```bash
    git add apps/web/e2e/portfolio/navigation.spec.ts
    git commit -m "test(e2e): assert case study live demo CTAs resolve to production URLs"
    git push origin main
    ```
  </action>
  <verify>
    ```bash
    cd /home/doctor/fernandomillan/apps/web && npx playwright test e2e/portfolio/navigation.spec.ts --project=chromium 2>&1 | tail -20
    ```
    All tests must pass with 0 failures. The new CTA href tests must be included in the output.
  </verify>
  <done>Playwright navigation spec passes with new CTA assertions. Both TeamFlow and DevCollab live demo links verified to contain correct production hostnames. Tests committed.</done>
</task>

</tasks>

<verification>
1. `grep -rn 'href="/teams"' /home/doctor/fernandomillan/apps/web/app/` — zero results
2. `grep -n 'teamflow.fernandomillan.me' /home/doctor/fernandomillan/apps/web/app/(portfolio)/projects/teamflow/page.tsx` — 2+ results
3. Playwright navigation spec passes: `cd /home/doctor/fernandomillan/apps/web && npx playwright test e2e/portfolio/navigation.spec.ts --project=chromium`
4. Git log shows both commits pushed to main (CI/CD rebuilds portfolio-web image automatically)
</verification>

<success_criteria>
- Zero relative `/teams` hrefs remain anywhere in the portfolio codebase
- Both TeamFlow and DevCollab CTA links are absolute production URLs
- Playwright navigation spec passes 100% including new CTA href assertions
- Changes pushed to main — CI/CD will rebuild and redeploy the portfolio-web image
</success_criteria>

<output>
After completion, create `.planning/phases/35-full-qa-audit-and-fixes/35-01-SUMMARY.md` following the standard summary template.
</output>
