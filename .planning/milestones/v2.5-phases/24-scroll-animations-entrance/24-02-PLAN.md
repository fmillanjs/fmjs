---
phase: 24-scroll-animations-entrance
plan: "02"
type: execute
wave: 2
depends_on:
  - "24-01"
files_modified:
  - apps/web/app/(portfolio)/page.tsx
  - apps/web/app/(portfolio)/projects/page.tsx
  - apps/web/app/(portfolio)/projects/teamflow/page.tsx
  - apps/web/app/(portfolio)/projects/devcollab/page.tsx
  - apps/web/app/(portfolio)/contact/page.tsx
  - apps/web/components/portfolio/case-study-section.tsx
autonomous: true
requirements:
  - ANIM-01

must_haves:
  truths:
    - "Section headings on all five portfolio routes (/, /projects, /projects/teamflow, /projects/devcollab, /contact) animate in with fade+slide-up when scrolled into view"
    - "Project cards on / and /projects stagger in sequentially with visible 150ms delay between each card"
    - "No motion.div or motion.* used directly in Server Component files — only AnimateIn/StaggerContainer/StaggerItem client components are imported"
    - "TypeScript build reports zero errors across all modified files"
  artifacts:
    - path: "apps/web/app/(portfolio)/page.tsx"
      provides: "Homepage with animated 'Featured Projects' heading and staggered project cards"
      contains: "StaggerContainer"
    - path: "apps/web/app/(portfolio)/projects/page.tsx"
      provides: "Projects page with animated 'Projects' heading and staggered ProjectCards"
      contains: "StaggerContainer"
    - path: "apps/web/components/portfolio/case-study-section.tsx"
      provides: "CaseStudySection with animated h2 heading via AnimateIn"
      contains: "AnimateIn"
    - path: "apps/web/app/(portfolio)/contact/page.tsx"
      provides: "Contact page with animated 'Get in Touch' heading"
      contains: "AnimateIn"
  key_links:
    - from: "apps/web/app/(portfolio)/page.tsx"
      to: "apps/web/components/portfolio/stagger-container.tsx"
      via: "import { StaggerContainer, StaggerItem }"
      pattern: "StaggerContainer"
    - from: "apps/web/app/(portfolio)/projects/page.tsx"
      to: "apps/web/components/portfolio/stagger-container.tsx"
      via: "import { StaggerContainer, StaggerItem }"
      pattern: "StaggerContainer"
    - from: "apps/web/components/portfolio/case-study-section.tsx"
      to: "apps/web/components/portfolio/animate-in.tsx"
      via: "import { AnimateIn }"
      pattern: "AnimateIn"
---

<objective>
Apply the animation primitives from Plan 01 across every portfolio page, satisfying ANIM-01's requirement that headings fade+slide-up and project cards stagger in on all five portfolio routes.

Purpose: This is where users actually see the animations. The primitives do nothing without being wired into real page content.

Output: Modified versions of homepage, projects page, both case study pages, contact page, and the shared CaseStudySection component — all with scroll-reveal animations applied.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-scroll-animations-entrance/24-01-SUMMARY.md
@apps/web/app/(portfolio)/page.tsx
@apps/web/app/(portfolio)/projects/page.tsx
@apps/web/app/(portfolio)/contact/page.tsx
@apps/web/components/portfolio/case-study-section.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Animate homepage heading and stagger project cards</name>
  <files>
    apps/web/app/(portfolio)/page.tsx
  </files>
  <action>
Modify `apps/web/app/(portfolio)/page.tsx` (Server Component — no `'use client'` needed):

1. Add imports at top:
```typescript
import { AnimateIn } from '@/components/portfolio/animate-in'
import { StaggerContainer, StaggerItem } from '@/components/portfolio/stagger-container'
```

2. Wrap the "Featured Projects" heading section with `AnimateIn`:
   - The `<div className="text-center mb-12">` containing the `<h2>Featured Projects</h2>` and subheading `<p>` should be wrapped in `<AnimateIn>`:
   ```tsx
   <AnimateIn>
     <div className="text-center mb-12">
       <h2 className="text-3xl md:text-4xl font-bold text-foreground mb-4">
         Featured Projects
       </h2>
       <p className="text-lg text-muted-foreground">
         Two production-ready SaaS applications showcasing full-stack expertise
       </p>
     </div>
   </AnimateIn>
   ```

3. Replace the project cards grid `<div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto">` with `StaggerContainer` and wrap each `<Link>` card in `<StaggerItem>`:
   ```tsx
   <StaggerContainer className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto">
     <StaggerItem>
       <Link href="/projects/teamflow" className="card-glow-hover block border-2 ...">
         {/* TeamFlow card content unchanged */}
       </Link>
     </StaggerItem>
     <StaggerItem>
       <Link href="/projects/devcollab" className="card-glow-hover block border-2 ...">
         {/* DevCollab card content unchanged */}
       </Link>
     </StaggerItem>
   </StaggerContainer>
   ```

4. Wrap the Stats section heading area with `AnimateIn` as well:
   - Wrap the outer `<div className="grid grid-cols-1 md:grid-cols-3 gap-8">` in `<AnimateIn>` so stats animate in as a block.

Important constraints:
- Do NOT add `'use client'` to page.tsx — it must remain a Server Component.
- Do NOT use `motion.div` directly in this file — only use the imported client components.
- Do NOT modify the card inner content, just wrap with StaggerItem.
- Keep all existing className values and content exactly as-is inside the wrappers.
  </action>
  <verify>
Run `cd /home/doctor/fernandomillan && npx tsc --project apps/web/tsconfig.json --noEmit 2>&1 | grep "portfolio/page" | head -10`

Zero TypeScript errors on homepage page.tsx.
  </verify>
  <done>
`apps/web/app/(portfolio)/page.tsx` imports `AnimateIn`, `StaggerContainer`, `StaggerItem`. The "Featured Projects" heading is wrapped in `AnimateIn`. Both project card Links are each wrapped in `StaggerItem` inside a `StaggerContainer`. Stats section is wrapped in `AnimateIn`. No `'use client'` directive added. TypeScript clean.
  </done>
</task>

<task type="auto">
  <name>Task 2: Animate projects page heading and stagger ProjectCard components</name>
  <files>
    apps/web/app/(portfolio)/projects/page.tsx
  </files>
  <action>
Modify `apps/web/app/(portfolio)/projects/page.tsx` (Server Component — no `'use client'` needed):

1. Add imports:
```typescript
import { AnimateIn } from '@/components/portfolio/animate-in'
import { StaggerContainer, StaggerItem } from '@/components/portfolio/stagger-container'
```

2. Wrap the heading block with `AnimateIn`:
```tsx
<AnimateIn className="mb-12">
  <h1 className="mb-4 text-4xl font-bold text-foreground md:text-5xl">Projects</h1>
  <p className="text-xl text-muted-foreground">Things I&apos;ve built</p>
</AnimateIn>
```
Remove the existing wrapper `<div className="mb-12">` that was there before — `AnimateIn` with `className="mb-12"` replaces it.

3. Replace the project cards grid `<div className="grid gap-6 md:grid-cols-2">` with `StaggerContainer` and wrap each `ProjectCard` in `StaggerItem`:
```tsx
<StaggerContainer className="grid gap-6 md:grid-cols-2">
  <StaggerItem>
    <ProjectCard
      title="TeamFlow"
      description="A production-ready work management SaaS with real-time collaboration"
      techStack={['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Redis', 'WebSocket']}
      href="/projects/teamflow"
      featured
    />
  </StaggerItem>
  <StaggerItem>
    <ProjectCard
      title="DevCollab"
      description="A developer collaboration platform with code snippets, Markdown posts, full-text search, and role-based workspaces"
      techStack={['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'Tiptap', 'Shiki']}
      href="/projects/devcollab"
      featured
    />
  </StaggerItem>
</StaggerContainer>
```

Important constraints:
- Keep page.tsx as Server Component — no `'use client'` directive.
- Do NOT use `motion.div` directly — only the imported client component wrappers.
- `ProjectCard` props must remain unchanged — only the wrapping changes.
  </action>
  <verify>
Run `cd /home/doctor/fernandomillan && npx tsc --project apps/web/tsconfig.json --noEmit 2>&1 | grep "projects/page" | head -10`

Zero TypeScript errors on projects page.tsx.
  </verify>
  <done>
`apps/web/app/(portfolio)/projects/page.tsx` imports `AnimateIn`, `StaggerContainer`, `StaggerItem`. Heading block wrapped in `AnimateIn className="mb-12"`. Both `ProjectCard` instances are each in a `StaggerItem` inside `StaggerContainer`. No `'use client'` added. TypeScript clean.
  </done>
</task>

<task type="auto">
  <name>Task 3: Animate case study section headings and contact page heading</name>
  <files>
    apps/web/components/portfolio/case-study-section.tsx
    apps/web/app/(portfolio)/projects/teamflow/page.tsx
    apps/web/app/(portfolio)/projects/devcollab/page.tsx
    apps/web/app/(portfolio)/contact/page.tsx
  </files>
  <action>
**Step A — Modify `case-study-section.tsx`:**

The cleanest approach is to animate the `h2` inside the shared `CaseStudySection` component. This means all case study sections on both `/projects/teamflow` and `/projects/devcollab` pages automatically get animated headings without changing each page file.

```typescript
import { AnimateIn } from './animate-in'

interface CaseStudySectionProps {
  title: string;
  children: React.ReactNode;
}

export function CaseStudySection({ title, children }: CaseStudySectionProps) {
  return (
    <section className="mb-12">
      <AnimateIn>
        <h2 className="mb-4 text-2xl font-bold">{title}</h2>
      </AnimateIn>
      <div>{children}</div>
    </section>
  )
}
```

Note: `CaseStudySection` is currently a Server Component (no directive). Adding import of `AnimateIn` (a 'use client' component) is valid — Next.js will treat `AnimateIn` as a client boundary automatically. Do NOT add `'use client'` to `case-study-section.tsx` itself.

**Step B — Animate the top-level page headers on teamflow and devcollab pages:**

For `apps/web/app/(portfolio)/projects/teamflow/page.tsx`, find the main project title heading (the `<h1>` or large title at the top of the case study — typically inside the `<div className="mb-12">` header block). Wrap just the title heading block with `AnimateIn`:

```typescript
import { AnimateIn } from '@/components/portfolio/animate-in'
```

Then wrap the header `<div className="mb-12">` containing the project title and back-link area with `AnimateIn`. Do NOT wrap the back-link `<Link>` alone — wrap the whole header block:
```tsx
<AnimateIn className="mb-12">
  {/* existing header content — back link + project title h1 + badges/links */}
</AnimateIn>
```

Apply the same pattern to `apps/web/app/(portfolio)/projects/devcollab/page.tsx`.

**Step C — Animate contact page heading:**

In `apps/web/app/(portfolio)/contact/page.tsx`, wrap the heading block with `AnimateIn`:

```typescript
import { AnimateIn } from '@/components/portfolio/animate-in'
```

```tsx
<AnimateIn className="text-center">
  <h1 className="text-3xl font-bold tracking-tight sm:text-4xl lg:text-5xl">
    Get in Touch
  </h1>
  <p className="mt-4 text-lg text-muted-foreground">
    Have a question or want to work together? Send me a message.
  </p>
</AnimateIn>
```
Remove the existing `<div className="text-center">` that the heading was in — `AnimateIn className="text-center"` replaces it.

Important constraints:
- Do NOT add `'use client'` to any of these files — they are all Server Components.
- Do NOT use `motion.div` directly in Server Component files.
- Do NOT change any content inside the wrapped elements — only add the wrapper.
- Keep all existing props and class names intact.
  </action>
  <verify>
Run `cd /home/doctor/fernandomillan && npx tsc --project apps/web/tsconfig.json --noEmit 2>&1 | head -30`

Zero TypeScript errors across entire apps/web project.

Also verify structure:
`grep -r "AnimateIn" apps/web/components/portfolio/case-study-section.tsx apps/web/app/\(portfolio\)/contact/page.tsx apps/web/app/\(portfolio\)/projects/teamflow/page.tsx apps/web/app/\(portfolio\)/projects/devcollab/page.tsx`

All four files should show AnimateIn usage.
  </verify>
  <done>
`case-study-section.tsx` imports and uses `AnimateIn` wrapping the `h2`. Both case study pages have `AnimateIn` on their header blocks. `contact/page.tsx` has `AnimateIn` wrapping the heading block. No `'use client'` added to any Server Component file. Full TypeScript check passes with zero errors.
  </done>
</task>

</tasks>

<verification>
After all three tasks complete:

1. Full TypeScript check: `cd /home/doctor/fernandomillan && npx tsc --project apps/web/tsconfig.json --noEmit` — zero errors.
2. Confirm AnimateIn usage across pages:
   `grep -r "AnimateIn\|StaggerContainer\|StaggerItem" apps/web/app/\(portfolio\)/ apps/web/components/portfolio/case-study-section.tsx`
   Should show results in: page.tsx (home), projects/page.tsx, contact/page.tsx, projects/teamflow/page.tsx, projects/devcollab/page.tsx, case-study-section.tsx.
3. Confirm no `motion.` direct usage in Server Components:
   `grep -r "motion\." apps/web/app/\(portfolio\)/` — should return nothing (only client components use motion directly).
4. Confirm no `'use client'` was accidentally added to page files:
   `grep -r "'use client'" apps/web/app/\(portfolio\)/` — should return nothing.
</verification>

<success_criteria>
- All five portfolio routes (/, /projects, /projects/teamflow, /projects/devcollab, /contact) have AnimateIn on their section headings
- Project card grids on / and /projects use StaggerContainer + StaggerItem
- CaseStudySection h2 headings auto-animate via the shared component modification
- Zero direct motion.* usage in Server Component pages
- TypeScript build is clean
</success_criteria>

<output>
After completion, create `.planning/phases/24-scroll-animations-entrance/24-02-SUMMARY.md`
</output>
