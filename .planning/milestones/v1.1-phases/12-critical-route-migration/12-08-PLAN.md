---
phase: 12-critical-route-migration
plan: 08
type: execute
wave: 2
depends_on:
  - 12-01
files_modified:
  - apps/web/app/(dashboard)/teams/[teamId]/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/settings/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/client-page.tsx
autonomous: true
requirements:
  - MIG-02
  - MIG-03

must_haves:
  truths:
    - "Team page stat boxes use Shadcn Card"
    - "Team page navigation buttons (Audit Log, Settings) use Shadcn Button asChild with Link"
    - "Team page inline SVG icons replaced with lucide-react icons"
    - "Settings page action buttons use Shadcn Button"
    - "Project client-page stat boxes use Shadcn Card"
    - "Project client-page action buttons use Shadcn Button asChild"
    - "All inline SVG icon paths deleted from route pages"
  artifacts:
    - path: "apps/web/app/(dashboard)/teams/[teamId]/page.tsx"
      provides: "Team page with Card stat boxes and Button navigation"
      contains: "CardContent"
    - path: "apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/client-page.tsx"
      provides: "Project page with Card stat boxes and Button actions"
      contains: "Card"
  key_links:
    - from: "apps/web/app/(dashboard)/teams/[teamId]/page.tsx"
      to: "@/components/ui/button"
      via: "Button asChild wrapping Link"
      pattern: "Button.*asChild"
    - from: "apps/web/app/(dashboard)/teams/[teamId]/page.tsx"
      to: "@/components/ui/card"
      via: "Card for stat boxes"
      pattern: "CardContent"
---

<objective>
Clean up the three dashboard route pages by replacing inline SVG icon buttons with Shadcn Button (using asChild + Link) and replacing raw card-like divs with Shadcn Card. These pages are Server Components (no state changes needed) — purely a JSX migration.

Purpose: MIG-02 + MIG-03. Route pages are the last remaining location with raw div-based card containers and manual `inline-flex items-center px-4 py-2 border ... rounded-md` button patterns.
Output: Three route pages use Button + Card. All inline SVG paths and manual button class strings deleted.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/12-critical-route-migration/12-RESEARCH.md
@apps/web/app/(dashboard)/teams/[teamId]/page.tsx
@apps/web/app/(dashboard)/teams/[teamId]/settings/page.tsx
@apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/client-page.tsx
@apps/web/components/ui/button.tsx
@apps/web/components/ui/card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate team page — Card stat boxes, Button navigation</name>
  <files>apps/web/app/(dashboard)/teams/[teamId]/page.tsx</files>
  <action>
    This is a Server Component. Add imports and replace raw patterns.

    1. Add imports:
       ```tsx
       import { Button } from '@/components/ui/button';
       import { Card, CardContent } from '@/components/ui/card';
       import { Settings, ClipboardList, Users, FolderOpen as FolderIcon, ClipboardCheck } from 'lucide-react';
       ```
       (FolderOpen is already imported from lucide-react for EmptyState — just add the others)

    2. Replace the Audit Log Link button (currently `<Link href=... className="inline-flex items-center px-4 py-2 border...">`):
       ```tsx
       <Button variant="outline" size="sm" asChild>
         <Link href={`/teams/${team.id}/audit-log`}>
           <ClipboardList className="mr-2 h-4 w-4" />
           Audit Log
         </Link>
       </Button>
       ```

    3. Replace the Settings Link button similarly:
       ```tsx
       <Button variant="outline" size="sm" asChild>
         <Link href={`/teams/${team.id}/settings`}>
           <Settings className="mr-2 h-4 w-4" />
           Settings
         </Link>
       </Button>
       ```

    4. Replace the three stat boxes (Members, Projects, Tasks) — each is currently `<div className="bg-card overflow-hidden shadow rounded-lg"><div className="p-5">...`:
       ```tsx
       <Card>
         <CardContent className="p-5">
           <div className="flex items-center">
             <div className="flex-shrink-0">
               <Users className="h-6 w-6 text-primary" />
             </div>
             <div className="ml-5 w-0 flex-1">
               <dl>
                 <dt className="text-sm font-medium text-muted-foreground truncate">Members</dt>
                 <dd className="text-lg font-semibold text-foreground">{team.members.length}</dd>
               </dl>
             </div>
           </div>
         </CardContent>
       </Card>
       ```
       Apply the same Card pattern for Projects and Tasks stat boxes, using `FolderIcon` and `ClipboardCheck` icons respectively.

    5. Replace the "New Project" Link button:
       ```tsx
       <Button size="sm" asChild>
         <Link href={`/teams/${team.id}/projects/new`}>New Project</Link>
       </Button>
       ```

    6. Replace the project cards in the projects grid (the `<Link ... className="bg-card shadow rounded-lg p-5 hover:shadow-md transition">` pattern) — these are a simplified inline version different from the ProjectCard component. Replace with Card:
       ```tsx
       <Link key={project.id} href={`/teams/${team.id}/projects/${project.id}`} className="block group">
         <Card className="hover:shadow-md transition-shadow">
           <CardContent className="p-5">
             <h4 className="text-lg font-semibold text-foreground mb-1">{project.name}</h4>
             {project.description && (
               <p className="text-sm text-muted-foreground mb-3 line-clamp-2">{project.description}</p>
             )}
             <div className="flex items-center justify-between">
               <span className="text-xs text-muted-foreground">{project._count?.tasks ?? 0} tasks</span>
               <span className={`text-xs px-2 py-1 rounded ${project.status === 'ACTIVE' ? 'bg-[var(--green-3)] text-[var(--green-11)]' : 'bg-muted text-muted-foreground'}`}>
                 {project.status}
               </span>
             </div>
           </CardContent>
         </Card>
       </Link>
       ```

    7. Replace the error state `<Link ... className="inline-flex items-center px-4 py-2 ...">` with Button asChild.

    8. Replace the Invite Team Members section wrapper `<div className="bg-card shadow rounded-lg">` with Card:
       ```tsx
       <Card>
         <CardContent className="p-6">
           <h3 className="text-lg leading-6 font-medium text-foreground mb-4">Invite Team Members</h3>
           <InviteMemberForm teamId={team.id} />
         </CardContent>
       </Card>
       ```

    Delete: all inline SVG `<svg>` + `<path>` blocks throughout the file. They are replaced by lucide-react icons.
  </action>
  <verify>
    `grep "<svg" apps/web/app/\(dashboard\)/teams/\[teamId\]/page.tsx` returns empty (all SVGs deleted).
    `grep "inline-flex items-center px-4 py-2" apps/web/app/\(dashboard\)/teams/\[teamId\]/page.tsx` returns empty (old button patterns deleted).
    `grep "CardContent\|Button" apps/web/app/\(dashboard\)/teams/\[teamId\]/page.tsx` returns matches.
    `npx tsc --noEmit` passes.
  </verify>
  <done>Team page uses Card for stat boxes and project cards, Button asChild for navigation links, lucide-react for icons. All inline SVGs and manual button class strings deleted.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate settings page and project client-page to Button + Card</name>
  <files>
    apps/web/app/(dashboard)/teams/[teamId]/settings/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/client-page.tsx
  </files>
  <action>
    Read both files first, then apply the same Button + Card patterns.

    ### settings/page.tsx

    1. Add imports: `Button`, `Card`, `CardContent`, lucide-react icons as needed.
    2. Replace all `<Link className="inline-flex items-center px-4 py-2 ...">` patterns with `<Button asChild><Link>...</Link></Button>`.
    3. Replace all `<div className="bg-card shadow rounded-lg ...">` card containers with `<Card><CardContent>...</CardContent></Card>`.
    4. Replace all inline `<svg>` blocks with lucide-react icons (Settings, ArrowLeft, etc.).
    5. The settings page contains the delete danger zone — leave ProjectActions component as-is (it was migrated in plan 07). Just migrate the surrounding page layout.

    ### client-page.tsx (project detail page)

    1. Add imports: `Button`, `Card`, `CardContent`, lucide-react icons.
    2. Replace stat boxes (`<div className="bg-card overflow-hidden shadow rounded-lg">`) with `<Card><CardContent>...</CardContent></Card>`.
    3. Replace `<Link className="inline-flex items-center...">` navigation buttons with `<Button asChild><Link>...</Link></Button>`.
    4. Replace any inline `<svg>` blocks with lucide-react equivalents.
    5. TaskViews, TaskFilters, TaskSearch, ViewToggle are already components — don't change them here.

    General pattern for Button asChild with Link:
    ```tsx
    <Button variant="outline" size="sm" asChild>
      <Link href="...">
        <SomeLucideIcon className="mr-2 h-4 w-4" />
        Link text
      </Link>
    </Button>
    ```

    Note: `asChild` merges Button styles onto the Link — no nested button/a elements (invalid HTML).
  </action>
  <verify>
    `grep "<svg" apps/web/app/\(dashboard\)/teams/\[teamId\]/settings/page.tsx` returns empty.
    `grep "<svg" apps/web/app/\(dashboard\)/teams/\[teamId\]/projects/\[projectId\]/client-page.tsx` returns empty or minimal (only if a third-party component renders SVG internally).
    `grep "inline-flex items-center px-4" apps/web/app/\(dashboard\)/teams/\[teamId\]/settings/page.tsx apps/web/app/\(dashboard\)/teams/\[teamId\]/projects/\[projectId\]/client-page.tsx` returns empty.
    `npx tsc --noEmit` passes.
  </verify>
  <done>Settings page and project client-page use Button asChild for links, Card for containers, lucide-react for icons. All inline SVG blocks and manual className button strings deleted.</done>
</task>

</tasks>

<verification>
1. `grep -r "<svg" apps/web/app/\(dashboard\)/teams/` returns empty (all inline SVGs removed)
2. `grep -r "inline-flex items-center px-4 py-2" apps/web/app/\(dashboard\)/teams/` returns empty
3. `grep -r "CardContent\|Button asChild" apps/web/app/\(dashboard\)/teams/` returns matches
4. `npx tsc --noEmit` passes
</verification>

<success_criteria>
All three route pages use Shadcn Button and Card. No inline SVG paths remain. No manual `inline-flex items-center px-4 py-2 border ... rounded-md` button strings remain.
</success_criteria>

<output>
After completion, create `.planning/phases/12-critical-route-migration/12-08-SUMMARY.md`
</output>
