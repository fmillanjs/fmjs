---
phase: 04-portfolio-polish
plan: 06
type: execute
wave: 3
depends_on: ["04-01", "04-02"]
files_modified:
  - apps/web/app/(dashboard)/teams/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/page.tsx
  - apps/web/app/(dashboard)/page.tsx
  - apps/web/components/layout/sidebar.tsx
  - apps/web/components/layout/header.tsx
  - apps/web/app/(dashboard)/layout.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/error.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/error.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard works on mobile screens with collapsible sidebar"
    - "Pages with no teams/projects/tasks show empty states with guidance"
    - "Error in a dashboard route shows error boundary with retry option"
    - "Dashboard UI uses CSS variables and dark mode classes"
  artifacts:
    - path: "apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/error.tsx"
      provides: "Project-level error boundary"
    - path: "apps/web/app/(dashboard)/teams/[teamId]/error.tsx"
      provides: "Team-level error boundary"
  key_links:
    - from: "apps/web/components/layout/sidebar.tsx"
      to: "mobile menu toggle"
      via: "responsive sidebar behavior"
      pattern: "md:block|hidden|hamburger"
    - from: "dashboard pages"
      to: "EmptyState component"
      via: "conditional rendering when data is empty"
      pattern: "EmptyState|empty-state"
---

<objective>
Polish the dashboard UI for mobile responsiveness, add empty states for data-less pages, add route-level error boundaries, and update dashboard components for dark mode.

Purpose: The dashboard must look professional on any device. Empty states and error boundaries show attention to UX detail that impresses hiring managers.
Output: Responsive dashboard, empty states on all data pages, error boundaries on dashboard routes, dark mode support.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-portfolio-polish/04-01-SUMMARY.md
@.planning/phases/04-portfolio-polish/04-02-SUMMARY.md
@apps/web/app/(dashboard)/layout.tsx
@apps/web/components/layout/sidebar.tsx
@apps/web/components/layout/header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dashboard Responsive Mobile + Dark Mode Polish</name>
  <files>
    apps/web/components/layout/sidebar.tsx
    apps/web/components/layout/header.tsx
    apps/web/app/(dashboard)/layout.tsx
  </files>
  <action>
    Make the dashboard responsive for mobile and update for dark mode:

    1. **Sidebar mobile behavior** (sidebar.tsx):
       - Currently likely always visible. Make it:
         - Hidden on mobile (hidden md:block)
         - Add mobile overlay sidebar triggered by hamburger button in header
         - Use state for mobile menu open/close
         - Overlay: fixed inset-0 z-40, semi-transparent backdrop, slide-in sidebar
         - Close on navigation (usePathname change) and backdrop click
       - Update all sidebar colors to use CSS variables:
         - `bg-gray-800` → `bg-sidebar dark:bg-sidebar` or `bg-gray-900 dark:bg-gray-950`
         - Text colors: `text-gray-300` → `text-muted-foreground`
       - If sidebar is a Server Component, convert to Client Component for mobile menu state

    2. **Header mobile updates** (header.tsx):
       - Add hamburger menu button visible only on mobile (md:hidden)
       - Pass mobile menu toggle function (or use a context/zustand store)
       - Add ThemeToggle to header if not already present
       - Update colors for dark mode compatibility
       - Make user menu responsive

    3. **Dashboard layout updates** (layout.tsx):
       - Update `bg-gray-50` → `bg-background` (uses CSS variable)
       - Ensure layout works when sidebar is hidden on mobile
       - Main content area should be full width on mobile

    All changes maintain existing functionality while adding mobile responsiveness.
    Use CSS variable-based colors (bg-background, text-foreground, border-border, etc.)
    NO purple colors.
  </action>
  <verify>
    - Sidebar hidden on mobile, visible on md+
    - Hamburger button visible on mobile in header
    - Mobile sidebar overlay opens/closes
    - Dark mode classes applied to sidebar and header
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Dashboard sidebar collapses to mobile overlay on small screens. Header shows hamburger menu on mobile. All dashboard layout components use CSS variables for dark mode compatibility.
  </done>
</task>

<task type="auto">
  <name>Task 2: Empty States and Dashboard Error Boundaries</name>
  <files>
    apps/web/app/(dashboard)/page.tsx
    apps/web/app/(dashboard)/teams/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/error.tsx
    apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/error.tsx
  </files>
  <action>
    Add empty states to dashboard data pages and error boundaries to route segments:

    1. **Empty states** — Update existing pages to show EmptyState component when data arrays are empty:

       - **Teams page** (teams/page.tsx): When user has no teams → EmptyState with Users icon, "No teams yet", "Create your first team to get started", button: "Create Team" linking to /teams/new
       - **Team detail** (teams/[teamId]/page.tsx): When team has no projects → EmptyState with FolderOpen icon, "No projects", "Create a project to start organizing work"
       - **Project detail** (teams/[teamId]/projects/[projectId]/page.tsx): When project has no tasks → EmptyState with CheckSquare icon, "No tasks yet", "Create your first task to get started"
       - **Dashboard home** (page.tsx): When user has no teams → welcome message with EmptyState suggesting "Join or create a team"

       Each empty state should:
       - Import EmptyState from @/components/ui/empty-state
       - Use appropriate lucide-react icon
       - Include actionable guidance (not just "nothing here")
       - Include CTA button/link where appropriate

    2. **Route-level error boundaries**:

       - **Team error** (teams/[teamId]/error.tsx):
         - Client component ('use client')
         - Show: "Failed to load team" with error.message
         - "Try Again" button calling reset()
         - "Back to Teams" link
       - **Project error** (teams/[teamId]/projects/[projectId]/error.tsx):
         - Client component ('use client')
         - Show: "Failed to load project" with error.message
         - "Try Again" button calling reset()
         - "Back to Projects" link

       Both error boundaries should:
       - Log error in useEffect
       - Use consistent styling matching global error.tsx
       - Support dark mode
  </action>
  <verify>
    - Empty states show when data arrays are empty (check for EmptyState import in each file)
    - Error boundaries exist at team and project route levels
    - Error boundaries have 'use client' directive and reset() button
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Dashboard pages show helpful empty states when no data exists. Route-level error boundaries catch and display errors gracefully with retry and navigation options.
  </done>
</task>

</tasks>

<verification>
- Dashboard sidebar responsive: hidden on mobile, overlay when toggled
- Theme toggle in dashboard header
- Empty states display on pages with no data
- Error boundaries catch route-level errors
- All dashboard components support dark mode
- `npm run build --filter=web` succeeds
</verification>

<success_criteria>
Dashboard is mobile-responsive with collapsible sidebar. All data pages show empty states when no data exists. Route-level error boundaries provide graceful error handling. Dashboard fully supports dark mode.
</success_criteria>

<output>
After completion, create `.planning/phases/04-portfolio-polish/04-06-SUMMARY.md`
</output>
