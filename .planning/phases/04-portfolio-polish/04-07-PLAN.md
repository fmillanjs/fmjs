---
phase: 04-portfolio-polish
plan: 07
type: execute
wave: 3
depends_on: ["04-01"]
files_modified:
  - apps/web/package.json
  - apps/web/components/ui/command-palette.tsx
  - apps/web/app/(dashboard)/layout.tsx
  - apps/web/app/(portfolio)/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Pressing Ctrl+K or Cmd+K opens a command palette"
    - "Command palette shows navigation options for both portfolio and dashboard"
    - "Selecting a command navigates to the correct page"
    - "Command palette closes on selection or Escape"
  artifacts:
    - path: "apps/web/components/ui/command-palette.tsx"
      provides: "Global command palette with keyboard shortcut"
  key_links:
    - from: "apps/web/components/ui/command-palette.tsx"
      to: "next/navigation router"
      via: "router.push for navigation"
      pattern: "router\\.push"
    - from: "apps/web/app/(dashboard)/layout.tsx"
      to: "CommandPalette"
      via: "rendered in layout"
      pattern: "CommandPalette"
---

<objective>
Add a command palette (Ctrl+K / Cmd+K) with keyboard shortcuts for quick navigation across the entire application.

Purpose: Command palette demonstrates UX polish and developer empathy. It's a feature that technical hiring managers recognize from tools like Linear, Vercel, and GitHub.
Output: Working command palette accessible via keyboard shortcut in both portfolio and dashboard layouts.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-portfolio-polish/04-RESEARCH.md
@.planning/phases/04-portfolio-polish/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install cmdk and Create Command Palette</name>
  <files>
    apps/web/package.json
    apps/web/components/ui/command-palette.tsx
  </files>
  <action>
    Install cmdk and create the command palette component:

    1. **Install cmdk**: `npm install cmdk` in apps/web

    2. **Command palette component** (apps/web/components/ui/command-palette.tsx):
       - Client component ('use client')
       - Use cmdk library directly (Command, Command.Dialog, Command.Input, Command.List, Command.Group, Command.Item, Command.Empty)
       - Keyboard shortcut: listen for Ctrl+K (Windows/Linux) or Cmd+K (Mac) to toggle open
       - Use `useEffect` for keyboard listener, cleanup on unmount
       - Use `useRouter()` from next/navigation for navigation

       **Groups and items:**

       Portfolio Navigation group:
       - Home → /
       - About → /about
       - Projects → /projects
       - Resume → /resume
       - Contact → /contact

       TeamFlow group:
       - Dashboard → /dashboard (or wherever main dashboard is)
       - TeamFlow Case Study → /projects/teamflow

       Quick Actions group:
       - Toggle Theme → call setTheme from next-themes useTheme()

       **Styling:**
       - Dialog overlay: fixed inset-0, bg-black/50, z-50
       - Dialog: fixed top-1/2 left-1/2 -translate, max-w-lg w-full, rounded-xl, bg-background, border, shadow-2xl
       - Input: w-full px-4 py-3, text-lg, border-b, bg-transparent, outline-none
       - Items: px-4 py-2, rounded-md, cursor-pointer, hover:bg-accent
       - Selected item: bg-accent text-accent-foreground
       - Group headings: px-4 py-1.5, text-xs, font-semibold, text-muted-foreground, uppercase
       - Empty state: "No results found." centered

       **Behavior:**
       - Close on item selection (call setOpen(false) then navigate)
       - Close on Escape key (handled by cmdk)
       - Close on backdrop click
       - Search/filter built into cmdk automatically
       - Smooth open/close animation (opacity + scale transition)

    NO purple colors. Use accent colors from CSS variables.
  </action>
  <verify>
    - cmdk is in apps/web/package.json dependencies
    - Command palette component exists with 'use client' directive
    - Component handles Ctrl+K / Cmd+K keyboard shortcut
    - Has navigation items for portfolio and dashboard
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Command palette component opens on Ctrl+K/Cmd+K with searchable navigation items for portfolio and dashboard routes, plus theme toggle.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire Command Palette into Layouts</name>
  <files>
    apps/web/app/(dashboard)/layout.tsx
    apps/web/app/(portfolio)/layout.tsx
  </files>
  <action>
    Add the command palette to both portfolio and dashboard layouts:

    1. **Dashboard layout** (apps/web/app/(dashboard)/layout.tsx):
       - Import CommandPalette from @/components/ui/command-palette
       - Render it inside the layout (after the main content area, before closing tags)
       - It's a client component rendered as a portal/dialog, so position doesn't matter much
       - Ensure it's inside the WebSocketProvider but can be anywhere in the tree

    2. **Portfolio layout** (apps/web/app/(portfolio)/layout.tsx):
       - Import CommandPalette from @/components/ui/command-palette
       - Render it inside the layout

    3. **Add hint to UI** (optional, in both navs):
       - Small "⌘K" badge/hint somewhere visible (e.g., in header or nav) to indicate command palette availability
       - Style: text-xs, border, rounded, px-1.5, text-muted-foreground, bg-muted
       - Show only on desktop (hidden sm:inline-flex)

    The command palette uses portal/dialog so it overlays everything. Just needs to be rendered in the component tree.
  </action>
  <verify>
    - CommandPalette imported and rendered in dashboard layout
    - CommandPalette imported and rendered in portfolio layout
    - Keyboard shortcut hint visible in navigation
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Command palette accessible via Ctrl+K/Cmd+K in both portfolio and dashboard. Keyboard shortcut hint visible in navigation bars.
  </done>
</task>

</tasks>

<verification>
- Ctrl+K / Cmd+K opens command palette on any page
- Typing filters the navigation items
- Selecting an item navigates to correct page
- Escape closes the palette
- Works in both portfolio and dashboard contexts
- Theme toggle action works from palette
- `npm run build --filter=web` succeeds
</verification>

<success_criteria>
Command palette is accessible globally via keyboard shortcut. Navigation items cover all major routes. Search filtering works. Theme toggle available as quick action.
</success_criteria>

<output>
After completion, create `.planning/phases/04-portfolio-polish/04-07-SUMMARY.md`
</output>
