---
phase: 04-portfolio-polish
plan: 05
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - apps/web/app/(portfolio)/contact/page.tsx
  - apps/web/components/portfolio/contact-form.tsx
  - apps/web/app/actions/contact.ts
  - apps/web/app/(portfolio)/contact/loading.tsx
  - apps/web/app/(portfolio)/projects/loading.tsx
  - apps/web/app/(portfolio)/loading.tsx
autonomous: true

must_haves:
  truths:
    - "Contact form validates name, email, and message fields with error messages"
    - "Contact form submission shows success/failure feedback"
    - "Portfolio pages show loading states during navigation"
    - "Contact form uses server action for form processing"
  artifacts:
    - path: "apps/web/app/(portfolio)/contact/page.tsx"
      provides: "Contact page with form"
    - path: "apps/web/components/portfolio/contact-form.tsx"
      provides: "Contact form with React Hook Form + Zod validation"
    - path: "apps/web/app/actions/contact.ts"
      provides: "Server action for contact form submission"
  key_links:
    - from: "apps/web/components/portfolio/contact-form.tsx"
      to: "apps/web/app/actions/contact.ts"
      via: "Server action invocation"
      pattern: "submitContactForm"
    - from: "apps/web/components/portfolio/contact-form.tsx"
      to: "react-hook-form"
      via: "form state management"
      pattern: "useForm.*zodResolver"
---

<objective>
Create the contact form page with server-side validation and submission, plus loading states for portfolio routes.

Purpose: Contact form is the conversion point for recruiter interest. Must be polished with proper validation and feedback.
Output: Working contact form with validation, server action, success/error feedback, and portfolio loading states.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-portfolio-polish/04-RESEARCH.md
@.planning/phases/04-portfolio-polish/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Contact Form with Server Action Validation</name>
  <files>
    apps/web/app/(portfolio)/contact/page.tsx
    apps/web/components/portfolio/contact-form.tsx
    apps/web/app/actions/contact.ts
  </files>
  <action>
    Create the contact page with a validated form and server action:

    1. **Contact server action** (apps/web/app/actions/contact.ts):
       - 'use server' directive
       - Define contactSchema with Zod:
         - name: z.string().min(2, "Name must be at least 2 characters")
         - email: z.string().email("Invalid email address")
         - message: z.string().min(10, "Message must be at least 10 characters").max(1000)
       - `submitContactForm` function accepts FormData
       - Server-side validation with contactSchema.safeParse
       - On validation failure: return { success: false, errors: fieldErrors }
       - On success: For now, log the contact to console (console.log for dev — production SMTP deferred)
         - Log format: "CONTACT FORM: name (email) - message"
         - Return { success: true }
       - On error: return { success: false, errors: { _form: ["Failed to send message"] } }
       - Export both the schema (for client reuse) and the action

    2. **Contact form component** (apps/web/components/portfolio/contact-form.tsx):
       - Client component ('use client')
       - Use React Hook Form with zodResolver and the shared contactSchema
       - Fields: Name (Input), Email (Input type="email"), Message (Textarea rows=5)
       - Show field-level error messages below each input (text-sm text-red-500)
       - Submit button with loading state ("Sending..." when submitting)
       - On success: show success message ("Message sent! I'll get back to you soon."), reset form
       - On failure: show error message above form or set field errors
       - Use `useActionState` or manual state for success/error feedback
       - Disable submit button while submitting
       - Style inputs: border, rounded, px-4 py-2, focus:ring-2 focus:ring-primary, dark mode compatible
       - Form layout: vertical stack with gap-4

    3. **Contact page** (apps/web/app/(portfolio)/contact/page.tsx):
       - Server Component
       - Metadata: title "Contact"
       - Page heading: "Get in Touch"
       - Subheading: "Have a question or want to work together? Send me a message."
       - Two-column layout on desktop:
         - Left: Contact form
         - Right: Contact info (email address, location/timezone, social links, "Response time: within 24 hours")
       - Single column on mobile (form first, info below)
       - Optional: subtle decoration or illustration placeholder

    NO purple colors. Use blue-based primary for focus rings and buttons.
  </action>
  <verify>
    - Contact page renders with form and info columns
    - Form fields have labels and error messages
    - Submit button exists with loading state text
    - Server action validates all three fields
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Contact form validates name, email, and message with instant client-side feedback. Server action processes submission with server-side validation. Success and error states are clearly communicated to user. Form is responsive with two-column desktop layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Portfolio Loading States and Responsiveness Polish</name>
  <files>
    apps/web/app/(portfolio)/loading.tsx
    apps/web/app/(portfolio)/projects/loading.tsx
    apps/web/app/(portfolio)/contact/loading.tsx
  </files>
  <action>
    Add loading states to portfolio routes and verify responsiveness:

    1. **Portfolio loading states**:
       - `(portfolio)/loading.tsx`: Hero section skeleton (large heading skeleton, paragraph skeleton, two button skeletons)
       - `(portfolio)/projects/loading.tsx`: Grid of project card skeletons (featured card larger)
       - `(portfolio)/contact/loading.tsx`: Form field skeletons (3 input skeletons + textarea skeleton + button skeleton)

    2. **Responsiveness verification** (no new files — check existing):
       - Verify all portfolio pages use responsive Tailwind classes:
         - Text sizes: text-3xl sm:text-4xl md:text-5xl lg:text-6xl
         - Grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3
         - Padding: px-4 sm:px-6 lg:px-8
         - Container: max-w-7xl mx-auto or container class
       - Navigation responsive: hamburger on mobile, inline links on md+
       - Footer columns stack on mobile
       - Case study prose max-width for readability
       - All images/cards fill mobile width

    Import Skeleton component from @/components/ui/skeleton (created in plan 04-02).
    All loading states work in both light and dark mode.
  </action>
  <verify>
    - All 3 portfolio loading.tsx files exist
    - Loading states import and use Skeleton component
    - Portfolio pages have responsive Tailwind classes (grep for sm: md: lg:)
    - `npm run build --filter=web` succeeds
  </verify>
  <done>
    Portfolio routes show content-shaped skeleton loading states during navigation. All portfolio pages are responsive from 320px mobile to 1440px desktop.
  </done>
</task>

</tasks>

<verification>
- /contact shows form with Name, Email, Message fields
- Form validates: empty submit shows errors, invalid email shows error
- Successful submit shows success message and resets form
- Portfolio loading states appear during navigation
- All portfolio pages responsive at mobile/tablet/desktop breakpoints
- `npm run build --filter=web` succeeds
</verification>

<success_criteria>
Contact form works with client + server validation, shows clear success/failure feedback. All portfolio routes have loading states. Portfolio is fully responsive across all breakpoints.
</success_criteria>

<output>
After completion, create `.planning/phases/04-portfolio-polish/04-05-SUMMARY.md`
</output>
