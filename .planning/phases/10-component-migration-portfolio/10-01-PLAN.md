---
phase: 10-component-migration-portfolio
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/components/ui/textarea.tsx
  - apps/web/components/portfolio/project-card.tsx
  - apps/web/components/portfolio/contact-form.tsx
  - apps/web/components/portfolio/hero-section.tsx
  - apps/web/components/portfolio/tech-stack.tsx
  - apps/web/components/portfolio/footer.tsx
  - apps/web/components/portfolio/nav.tsx
autonomous: true
requirements:
  - MIG-01

must_haves:
  truths:
    - "Portfolio component files import from @/components/ui/* instead of raw HTML elements"
    - "ProjectCard uses Card, CardHeader, CardTitle, CardDescription, CardContent, Badge primitives"
    - "ContactForm uses Input, Label, Textarea, Button primitives (not raw input/textarea/button)"
    - "HeroSection, TechStack, Footer, Nav use text-muted-foreground instead of text-gray-600 dark:text-gray-300"
    - "grep for bg-white|bg-gray-|text-gray-|border-gray-|bg-blue- returns zero results in components/portfolio"
  artifacts:
    - path: "apps/web/components/ui/textarea.tsx"
      provides: "Shadcn Textarea component installed via CLI"
      contains: "Textarea"
    - path: "apps/web/components/portfolio/project-card.tsx"
      provides: "Migrated ProjectCard using Card + Badge primitives"
      contains: "from '@/components/ui/card'"
    - path: "apps/web/components/portfolio/contact-form.tsx"
      provides: "Migrated ContactForm using Input + Label + Textarea + Button"
      contains: "from '@/components/ui/input'"
    - path: "apps/web/components/portfolio/hero-section.tsx"
      provides: "Migrated HeroSection with Button asChild + semantic tokens"
      contains: "text-muted-foreground"
    - path: "apps/web/components/portfolio/tech-stack.tsx"
      provides: "Migrated TechStack using Card + semantic tokens"
      contains: "from '@/components/ui/card'"
    - path: "apps/web/components/portfolio/footer.tsx"
      provides: "Footer with semantic token classes"
      contains: "text-muted-foreground"
    - path: "apps/web/components/portfolio/nav.tsx"
      provides: "Nav with semantic token classes + Button for mobile toggle"
      contains: "text-muted-foreground"
  key_links:
    - from: "apps/web/components/portfolio/contact-form.tsx"
      to: "apps/web/components/ui/textarea.tsx"
      via: "import Textarea"
      pattern: "from '@/components/ui/textarea'"
    - from: "apps/web/components/portfolio/project-card.tsx"
      to: "apps/web/components/ui/card.tsx"
      via: "import Card sub-components"
      pattern: "from '@/components/ui/card'"
---

<objective>
Install the Shadcn Textarea component and migrate all six portfolio component files from raw HTML with hardcoded Tailwind color classes to Shadcn UI primitives with semantic design tokens.

Purpose: Portfolio components are the leaf nodes of the migration tree. Pages depend on these components, so migrating components first unblocks page migration in Plan 03. This also validates the migration patterns before touching portfolio pages.
Output: Textarea installed; project-card, contact-form, hero-section, tech-stack, footer, nav fully migrated to Shadcn primitives with zero hardcoded color classes.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-component-migration-portfolio/10-RESEARCH.md
@apps/web/DESIGN-SYSTEM.md
@.planning/phases/09-design-system-foundation/09-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Textarea and migrate structural components (ProjectCard + ContactForm)</name>
  <files>
    apps/web/components/ui/textarea.tsx
    apps/web/components/portfolio/project-card.tsx
    apps/web/components/portfolio/contact-form.tsx
  </files>
  <action>
**Step 1: Install Shadcn Textarea via CLI.**
Run from repo root (NOT apps/web — the -c flag targets the web app):
```bash
npx shadcn@latest add textarea -c ./apps/web
```
This creates `apps/web/components/ui/textarea.tsx`. Verify the file exists after running.

**Step 2: Migrate project-card.tsx.**
Replace the entire file content. Current file uses `bg-white`, `dark:bg-gray-900`, `border-blue-500`, `border-gray-200 dark:border-gray-800`, `bg-blue-100 text-blue-800`, `bg-gray-100 dark:bg-gray-800` — all hardcoded.

New implementation:
```tsx
import Link from 'next/link'
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'

interface ProjectCardProps {
  title: string
  description: string
  techStack: string[]
  href: string
  featured?: boolean
}

export function ProjectCard({ title, description, techStack, href, featured }: ProjectCardProps) {
  return (
    <Link href={href} className="block group">
      <Card className="transition-shadow hover:shadow-lg h-full">
        <CardHeader>
          {featured && (
            <Badge variant="default" className="w-fit mb-2">Featured</Badge>
          )}
          <CardTitle className="text-xl">{title}</CardTitle>
          <CardDescription>{description}</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="flex flex-wrap gap-2">
            {techStack.map((tech) => (
              <Badge key={tech} variant="secondary">{tech}</Badge>
            ))}
          </div>
        </CardContent>
      </Card>
    </Link>
  )
}
```

Key decisions:
- `Link className="block group"` wrapping Card — simpler than Button asChild wrapping Card (avoids awkward nested focus)
- `Badge variant="default"` for "Featured" (primary color, status marker)
- `Badge variant="secondary"` for tech tags (neutral, NOT variant="default" — would look like blue action buttons)
- CardDescription handles `text-muted-foreground` automatically

**Step 3: Migrate contact-form.tsx.**
Read the current file first to understand the react-hook-form/Zod structure. Then replace ONLY the JSX elements (inputs, labels, textarea, submit button) while leaving all hook-form logic (`register`, `handleSubmit`, `watch`, `formState`, `zodResolver`) completely untouched.

Replacements:
- `<label htmlFor="...">` → `<Label htmlFor="...">`  (import from '@/components/ui/label')
- `<input {...register('name')} ...>` → `<Input {...register('name')} disabled={isSubmitting} />` (import from '@/components/ui/input')
- `<input {...register('email')} ...>` → `<Input type="email" {...register('email')} disabled={isSubmitting} />`
- `<textarea {...register('message')} ...>` → `<Textarea {...register('message')} rows={5} disabled={isSubmitting} />` (import from '@/components/ui/textarea')
- `<button type="submit">` → `<Button type="submit" disabled={isSubmitting} className="w-full">` (import from '@/components/ui/button')
- Error message classes: replace any `text-red-500` with `text-destructive`
- Remove ALL className attributes from the replaced elements (Input/Label/Textarea/Button handle their own styling)

CRITICAL: Do NOT touch `register()`, `handleSubmit()`, `zodResolver()`, `watch()`, or the `onSubmit` function. Migration is JSX-layer only.
  </action>
  <verify>
```bash
# Textarea installed
ls /home/doctor/fernandomillan/apps/web/components/ui/textarea.tsx

# Zero hardcoded patterns in migrated files
grep -n "bg-white\|bg-gray-\|text-gray-\|border-gray-\|bg-blue-\|dark:bg-gray\|dark:text-gray\|text-red-500" \
  /home/doctor/fernandomillan/apps/web/components/portfolio/project-card.tsx \
  /home/doctor/fernandomillan/apps/web/components/portfolio/contact-form.tsx

# TypeScript compiles without errors
cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | head -30
```
  </verify>
  <done>
`textarea.tsx` exists in `apps/web/components/ui/`. The grep for hardcoded color patterns in `project-card.tsx` and `contact-form.tsx` returns zero results. TypeScript compilation passes without errors in these files.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate simple components (HeroSection, TechStack, Footer, Nav)</name>
  <files>
    apps/web/components/portfolio/hero-section.tsx
    apps/web/components/portfolio/tech-stack.tsx
    apps/web/components/portfolio/footer.tsx
    apps/web/components/portfolio/nav.tsx
  </files>
  <action>
Read each file before modifying. Apply the semantic token replacement mapping from RESEARCH.md Pattern 5. For each file, the strategy is:

**Token replacement mapping (RESEARCH.md Pattern 5):**
- `text-gray-600 dark:text-gray-300` → `text-muted-foreground`
- `text-gray-900 dark:text-white` → `text-foreground`
- `bg-white dark:bg-gray-900` → `bg-card`
- `bg-gray-50 dark:bg-gray-900` → `bg-muted`
- `bg-gray-100 dark:bg-gray-800` → `bg-muted`
- `border-gray-200 dark:border-gray-800` → `border-border`
- `bg-blue-600 text-white` → `bg-primary text-primary-foreground`
- `text-blue-600 dark:text-blue-400` → `text-primary`

**hero-section.tsx:** Read first. The research notes buttons are already using semantic tokens (`bg-primary`, `border-input`). Replace any `<Link>` CTA buttons with `<Button asChild>` pattern. Replace `text-gray-600 dark:text-gray-300` with `text-muted-foreground`. Import Button from '@/components/ui/button'.

Pattern for Link CTAs:
```tsx
import { Button } from "@/components/ui/button"
import Link from "next/link"

// Internal navigation
<Button asChild size="lg">
  <Link href="/about">Learn More</Link>
</Button>

// External links (GitHub, etc.)
<Button asChild variant="outline" size="lg">
  <a href="https://github.com/fernandomillan" target="_blank" rel="noopener noreferrer">
    View GitHub
  </a>
</Button>
```

**tech-stack.tsx:** Read first. Replace raw `<div>` tile containers (bordered divs) with Shadcn `<Card>` components. Replace `text-gray-600 dark:text-gray-300` with `text-muted-foreground`. Import Card sub-components from '@/components/ui/card'.

**footer.tsx:** Read first. This is a partial migration — semantic token replacement only. Replace `text-gray-600 dark:text-gray-300` with `text-muted-foreground`. Social links can stay as `<a>` or optionally use `<Button variant="ghost" asChild>` for the icon links.

**nav.tsx:** Read first. Replace `text-gray-600 dark:text-gray-300` with `text-muted-foreground`. For the mobile hamburger/toggle button, replace with `<Button variant="ghost" size="icon">`. The research notes this file already uses `ThemeToggle` from `@/components/ui` — preserve that import unchanged.

After all 4 files, run the zero-pattern verification grep.
  </action>
  <verify>
```bash
# Zero hardcoded color patterns remain in any portfolio component
grep -rn "bg-white\|bg-gray-\|text-gray-\|border-gray-\|bg-blue-\|dark:bg-gray\|dark:text-gray" \
  /home/doctor/fernandomillan/apps/web/components/portfolio/

# TypeScript still compiles
cd /home/doctor/fernandomillan && npx tsc --noEmit -p apps/web/tsconfig.json 2>&1 | head -30

# No raw HTML form/button elements remain in portfolio components
grep -rn "<input\b\|<textarea\b\|<button\b" \
  /home/doctor/fernandomillan/apps/web/components/portfolio/
```
  </verify>
  <done>
grep for hardcoded color patterns in `components/portfolio/` returns zero results. grep for raw `<input>`, `<textarea>`, `<button>` in `components/portfolio/` returns zero results. TypeScript compilation passes.
  </done>
</task>

</tasks>

<verification>
1. `apps/web/components/ui/textarea.tsx` exists
2. `grep -rn "bg-white\|bg-gray-\|text-gray-\|border-gray-\|bg-blue-" apps/web/components/portfolio/` returns zero results
3. `grep -rn "<input\b\|<textarea\b\|<button\b" apps/web/components/portfolio/` returns zero results
4. `project-card.tsx` imports from `@/components/ui/card` and `@/components/ui/badge`
5. `contact-form.tsx` imports from `@/components/ui/input`, `@/components/ui/label`, `@/components/ui/textarea`, `@/components/ui/button`
6. TypeScript compilation passes without errors
</verification>

<success_criteria>
All six portfolio component files migrated to Shadcn primitives. Textarea installed. Zero hardcoded color class patterns in `components/portfolio/`. Zero raw HTML form elements in portfolio components. TypeScript compiles cleanly.
</success_criteria>

<output>
After completion, create `.planning/phases/10-component-migration-portfolio/10-01-SUMMARY.md`
</output>
