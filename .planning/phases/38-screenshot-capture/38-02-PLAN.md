---
phase: 38-screenshot-capture
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/e2e/screenshots/devcollab-capture.ts
  - apps/web/public/screenshots/devcollab-workspace.png
  - apps/web/public/screenshots/devcollab-code-snippet.png
  - apps/web/public/screenshots/devcollab-thread.png
  - apps/web/public/screenshots/devcollab-search.png
  - apps/web/public/screenshots/devcollab-activity.png
autonomous: true
requirements:
  - SHOT-02

must_haves:
  truths:
    - "A Playwright script file exists at apps/web/e2e/screenshots/devcollab-capture.ts"
    - "Running the script against devcollab.fernandomillan.me produces 5 PNG files in apps/web/public/screenshots/"
    - "All 5 DevCollab PNG files are 1280x800 pixels"
    - "The 5 files cover: workspace overview/feed, code snippet with Shiki, threaded discussion with @mention, Cmd+K search, activity feed/notification bell"
  artifacts:
    - path: "apps/web/e2e/screenshots/devcollab-capture.ts"
      provides: "Playwright script for DevCollab screenshot capture"
      exports: []
    - path: "apps/web/public/screenshots/devcollab-workspace.png"
      provides: "Workspace overview/feed screenshot"
    - path: "apps/web/public/screenshots/devcollab-code-snippet.png"
      provides: "Code snippet with Shiki highlighting screenshot"
    - path: "apps/web/public/screenshots/devcollab-thread.png"
      provides: "Threaded discussion with @mention screenshot"
    - path: "apps/web/public/screenshots/devcollab-search.png"
      provides: "Cmd+K full-text search screenshot"
    - path: "apps/web/public/screenshots/devcollab-activity.png"
      provides: "Activity feed/notification bell screenshot"
  key_links:
    - from: "devcollab-capture.ts"
      to: "devcollab.fernandomillan.me"
      via: "page.goto() with live production URL"
      pattern: "goto.*devcollab\\.fernandomillan\\.me"
    - from: "devcollab-capture.ts"
      to: "apps/web/public/screenshots/"
      via: "page.screenshot({ path: ... })"
      pattern: "screenshot.*public/screenshots"
---

<objective>
Write and execute a Playwright script that authenticates against the live DevCollab production app and captures 5 workflow screenshots at exactly 1280x800 pixels, saving them to apps/web/public/screenshots/.

Purpose: Produce the static screenshot assets Phase 39 will annotate with callout overlays in the WalkthroughSection component.
Output: 5 PNG files — devcollab-workspace.png, devcollab-code-snippet.png, devcollab-thread.png, devcollab-search.png, devcollab-activity.png — all at 1280x800 in apps/web/public/screenshots/.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Pattern mirrors Plan 01 (teamflow-capture.ts) — use same chromium.launch() approach -->
<!-- DevCollab is a separate app at devcollab.fernandomillan.me with its own auth -->

DevCollab app characteristics (from v4.0 QA work):
- Live at: https://devcollab.fernandomillan.me
- Auth: similar demo credentials pattern — check devcollab-web app for demo credentials
  - Try: demo@devcollab.dev / Password123 or check apps/devcollab-api for seed data
- Features to screenshot: workspace feed, code snippets (Shiki syntax highlighting), threaded messages with @mentions, Cmd+K search modal, activity/notification UI
- The app is a developer collaboration platform (messages, code sharing, workspaces)

Viewport: 1280x800 (same as Plan 01 — viewport-only screenshots, NOT fullPage)
Output dir: apps/web/public/screenshots/ (same as Plan 01)
Script pattern: identical to teamflow-capture.ts — standalone chromium.launch() script
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Discover DevCollab credentials and write capture script</name>
  <files>apps/web/e2e/screenshots/devcollab-capture.ts</files>
  <action>
First, find DevCollab demo credentials by checking the devcollab-api seed/fixture files:
```bash
grep -r "demo\|seed\|password\|email" apps/devcollab-api/src --include="*.ts" -l 2>/dev/null | head -5
grep -r "password\|demo" apps/devcollab-api/prisma/ -l 2>/dev/null | head -5
```

Also check for any .env or README mentioning DevCollab credentials:
```bash
grep -r "devcollab\|demo" apps/devcollab-web --include="*.ts" --include="*.md" -l 2>/dev/null | head -5
```

Common credential patterns to try (in order):
1. demo@devcollab.dev / Password123
2. demo@devcollab.dev / Demo123!
3. admin@devcollab.dev / Password123
4. test@devcollab.dev / Password123

Note: devcollab.fernandomillan.me may use a different auth endpoint structure than teamflow. Check the login page structure by examining apps/devcollab-web/app/(auth)/ or similar.

Write apps/web/e2e/screenshots/devcollab-capture.ts following the exact same structure as teamflow-capture.ts (chromium.launch, viewport 1280x800, inline auth, 5 screenshots, error handling per screenshot).

DevCollab login flow:
1. Navigate to https://devcollab.fernandomillan.me/login (or /signin — check which exists)
2. Fill email and password
3. Submit
4. Wait for redirect to dashboard/workspace

5 screenshots to capture:
1. devcollab-workspace.png — The main workspace/feed page (home dashboard). Navigate to root or /workspace or /feed after login. Screenshot the message feed with workspace UI visible.
2. devcollab-code-snippet.png — Find a message or post containing a code snippet with Shiki syntax highlighting (colored code block). If none exists in seed data, create one: look for a "New post" or message input, paste a TypeScript/JavaScript code sample wrapped in triple backticks, submit, then screenshot the rendered result.
3. devcollab-thread.png — Find or create a threaded discussion. Look for a message with a "Reply" action or thread indicator. Click it to open the thread view. If @mention UI exists, the screenshot should show the thread panel with replies visible. Navigate to a message thread or use `/workspace/{id}/thread/{id}` pattern.
4. devcollab-search.png — Trigger the Cmd+K search modal using keyboard shortcut: `await page.keyboard.press('Meta+k')` (or 'Control+k'). Wait for search modal/overlay to appear (role='dialog' or '[data-testid*="search"]' or '[placeholder*="Search"]'). Screenshot with the search modal open.
5. devcollab-activity.png — Navigate to activity feed or notification panel. Look for a bell icon or "Activity" nav item. Click it to open notification dropdown or navigate to /activity. Screenshot the notification/activity view.

Same error handling pattern as Plan 01: try/catch per screenshot, fallback to current page state if navigation fails.
  </action>
  <verify>
    <automated>test -f /home/doctor/fernandomillan/apps/web/e2e/screenshots/devcollab-capture.ts && echo "Script file exists"</automated>
  </verify>
  <done>devcollab-capture.ts exists with chromium.launch(), viewport 1280x800, DevCollab login flow, 5 named screenshot saves, error handling per screenshot</done>
</task>

<task type="auto">
  <name>Task 2: Execute DevCollab capture script and verify 5 PNG files</name>
  <files>
    apps/web/public/screenshots/devcollab-workspace.png
    apps/web/public/screenshots/devcollab-code-snippet.png
    apps/web/public/screenshots/devcollab-thread.png
    apps/web/public/screenshots/devcollab-search.png
    apps/web/public/screenshots/devcollab-activity.png
  </files>
  <action>
Run the capture script from the apps/web directory:
```bash
cd apps/web && npx tsx e2e/screenshots/devcollab-capture.ts
```

If the login fails with the first credential set, update the script with the correct credentials found during Task 1 credential discovery, then re-run.

Common DevCollab navigation issues and fixes:
- If search modal doesn't open with Meta+k: try Control+k, or look for a search button/icon and click it
- If thread view URL is unknown: screenshot any message detail page that shows a conversation thread
- If code snippet not in seed data: programmatically post one via the message input (type a message with \`\`\`js code \`\`\` markdown, submit, screenshot the rendered post)
- If workspace/feed page is at a non-standard path: check the redirected URL after login and use that path

After running, verify all 5 PNG files exist:
```bash
ls -lh apps/web/public/screenshots/devcollab-*.png
```

Each file should be > 10KB. If any file is missing, diagnose from script output and fix the navigation/selector logic before re-running.

Note: devcollab-workspace.png and devcollab-search.png already exist from v4.0 work — the script will overwrite them. That is intentional (ensures consistent 1280x800 dimensions).
  </action>
  <verify>
    <automated>ls /home/doctor/fernandomillan/apps/web/public/screenshots/devcollab-workspace.png /home/doctor/fernandomillan/apps/web/public/screenshots/devcollab-code-snippet.png /home/doctor/fernandomillan/apps/web/public/screenshots/devcollab-thread.png /home/doctor/fernandomillan/apps/web/public/screenshots/devcollab-search.png /home/doctor/fernandomillan/apps/web/public/screenshots/devcollab-activity.png && echo "All 5 DevCollab screenshots exist"</automated>
  </verify>
  <done>All 5 devcollab-*.png files exist in apps/web/public/screenshots/, each > 10KB, each at 1280x800 viewport dimensions</done>
</task>

</tasks>

<verification>
- apps/web/e2e/screenshots/devcollab-capture.ts exists with correct structure
- 5 DevCollab PNG files exist in apps/web/public/screenshots/
- Each file is > 10KB (not blank/error screenshots)
- Script uses viewport 1280x800 (not fullPage) so all screenshots are exactly 1280x800
</verification>

<success_criteria>
Running `ls apps/web/public/screenshots/devcollab-*.png | wc -l` returns 5.
Running `file apps/web/public/screenshots/devcollab-workspace.png` confirms PNG format.
All 5 screenshots visually represent their named workflow area (workspace, code snippet, thread, search, activity).
</success_criteria>

<output>
After completion, create `.planning/phases/38-screenshot-capture/38-02-SUMMARY.md` documenting:
- DevCollab demo credentials that worked
- Which selectors/navigation paths worked for each of the 5 screenshots
- Any fallback approaches used
- Whether existing screenshots (workspace, search) were overwritten or reused
</output>
