---
phase: 38-screenshot-capture
plan: 03
type: execute
wave: 2
depends_on:
  - "38-01"
  - "38-02"
files_modified:
  - apps/web/src/data/screenshots-manifest.ts
autonomous: true
requirements:
  - SHOT-03

must_haves:
  truths:
    - "All 10 PNG files exist in apps/web/public/screenshots/"
    - "All 10 PNG files are exactly 1280x800 pixels"
    - "A typed manifest file exists at apps/web/src/data/screenshots-manifest.ts exporting metadata with width/height props for next/image"
    - "The manifest covers all 5 TeamFlow and all 5 DevCollab screenshots"
  artifacts:
    - path: "apps/web/src/data/screenshots-manifest.ts"
      provides: "Typed screenshot metadata for next/image consumption"
      exports:
        - "TEAMFLOW_SCREENSHOTS"
        - "DEVCOLLAB_SCREENSHOTS"
        - "Screenshot"
    - path: "apps/web/public/screenshots/teamflow-kanban.png"
      provides: "1280x800 kanban screenshot"
    - path: "apps/web/public/screenshots/devcollab-workspace.png"
      provides: "1280x800 workspace screenshot"
  key_links:
    - from: "apps/web/src/data/screenshots-manifest.ts"
      to: "apps/web/public/screenshots/*.png"
      via: "width: 1280, height: 800 — consumed by next/image in Phase 39"
      pattern: "width.*1280.*height.*800"
---

<objective>
Verify all 10 screenshots are 1280x800px and create a typed manifest file that Phase 39's WalkthroughSection component will import to get next/image-ready metadata (path, width, height, alt text) for each screenshot.

Purpose: Completes SHOT-03 requirement — ensures all assets are properly sized and creates the contract Phase 39 builds against.
Output: apps/web/src/data/screenshots-manifest.ts with typed exports for all 10 screenshots.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- next/image usage pattern in this codebase -->
<!-- From v4.0 decision: screenshots stored in apps/web/public/screenshots/ at 1280x800; served via next/image -->
<!-- next/image requires explicit width and height when using src="/screenshots/..." -->

next/image import pattern (Next.js 15):
```typescript
import Image from 'next/image'
// Usage:
<Image
  src="/screenshots/teamflow-kanban.png"
  width={1280}
  height={800}
  alt="TeamFlow Kanban board showing drag-and-drop task management"
/>
```

The manifest provides the data shape Phase 39 imports. Design it so WalkthroughSection
can map over an array and pass width/height to Image without hardcoding.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify all 10 screenshots are 1280x800 and fix any dimension mismatches</name>
  <files>
    apps/web/public/screenshots/teamflow-kanban.png
    apps/web/public/screenshots/teamflow-presence.png
    apps/web/public/screenshots/teamflow-task-modal.png
    apps/web/public/screenshots/teamflow-rbac.png
    apps/web/public/screenshots/teamflow-audit-log.png
    apps/web/public/screenshots/devcollab-workspace.png
    apps/web/public/screenshots/devcollab-code-snippet.png
    apps/web/public/screenshots/devcollab-thread.png
    apps/web/public/screenshots/devcollab-search.png
    apps/web/public/screenshots/devcollab-activity.png
  </files>
  <action>
Verify all 10 PNG dimensions using the `file` command or Python's Pillow (if installed) or Node's `sharp` (if installed):

Option A — using `file` command (always available):
```bash
file apps/web/public/screenshots/*.png
```
This shows PNG dimensions in the output. Look for "1280 x 800" in each file's info.

Option B — using Python (likely available):
```python
import subprocess, sys
files = ['teamflow-kanban', 'teamflow-presence', 'teamflow-task-modal', 'teamflow-rbac', 'teamflow-audit-log',
         'devcollab-workspace', 'devcollab-code-snippet', 'devcollab-thread', 'devcollab-search', 'devcollab-activity']
for f in files:
    result = subprocess.run(['python3', '-c',
      f'from PIL import Image; img=Image.open("apps/web/public/screenshots/{f}.png"); print("{f}:", img.size)'],
      capture_output=True, text=True)
    print(result.stdout or result.stderr)
```

If any screenshot has wrong dimensions:
- If it's larger (e.g., from fullPage capture): re-run the relevant capture script with a crop fix. Use sharp (npm install sharp if needed) to crop to 1280x800:
  ```bash
  cd apps/web && node -e "
  const sharp = require('sharp');
  sharp('public/screenshots/FILENAME.png')
    .resize(1280, 800, { fit: 'cover', position: 'top' })
    .toFile('public/screenshots/FILENAME-fixed.png')
    .then(() => require('fs').renameSync('public/screenshots/FILENAME-fixed.png', 'public/screenshots/FILENAME.png'))
  "
  ```
- If it's a different size entirely: re-run the capture script (the script uses viewport 1280x800 + non-fullPage, so re-running should produce correct dimensions).

All 10 files must be exactly 1280x800 before proceeding to Task 2.
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan/apps/web && python3 -c "
import struct, zlib, os
def png_size(path):
    with open(path, 'rb') as f:
        f.read(8)
        f.read(4)
        f.read(4)
        w = struct.unpack('>I', f.read(4))[0]
        h = struct.unpack('>I', f.read(4))[0]
        return w, h
files = ['teamflow-kanban','teamflow-presence','teamflow-task-modal','teamflow-rbac','teamflow-audit-log','devcollab-workspace','devcollab-code-snippet','devcollab-thread','devcollab-search','devcollab-activity']
ok = True
for f in files:
    path = f'public/screenshots/{f}.png'
    if not os.path.exists(path):
        print(f'MISSING: {path}')
        ok = False
        continue
    w, h = png_size(path)
    if w != 1280 or h != 800:
        print(f'WRONG SIZE: {f} = {w}x{h}')
        ok = False
    else:
        print(f'OK: {f} = {w}x{h}')
if ok:
    print('ALL 10 SCREENSHOTS: 1280x800 OK')
" 2>/dev/null || echo "Python check failed — run file command manually"</automated>
  </verify>
  <done>All 10 PNG files exist and are exactly 1280x800 pixels. Confirmed by dimension check.</done>
</task>

<task type="auto">
  <name>Task 2: Create typed screenshots manifest for next/image consumption</name>
  <files>apps/web/src/data/screenshots-manifest.ts</files>
  <action>
Create apps/web/src/data/screenshots-manifest.ts with typed exports for all 10 screenshots.

First check if src/data/ directory exists, create it if not:
```bash
mkdir -p apps/web/src/data
```

The manifest file must export:
1. A `Screenshot` interface with: `src`, `width`, `height`, `alt`, `label` (short name for the callout legend)
2. `TEAMFLOW_SCREENSHOTS` — array of 5 Screenshot objects for TeamFlow
3. `DEVCOLLAB_SCREENSHOTS` — array of 5 Screenshot objects for DevCollab

All screenshots have width: 1280, height: 800 (verified in Task 1).

src paths are relative to public/ (next/image convention): `/screenshots/filename.png`

Alt text must be descriptive and specific (for accessibility — SHOT-03 feeds into QA-02 in Phase 40).

```typescript
export interface Screenshot {
  src: string
  width: number
  height: number
  alt: string
  label: string
}

export const TEAMFLOW_SCREENSHOTS: Screenshot[] = [
  {
    src: '/screenshots/teamflow-kanban.png',
    width: 1280,
    height: 800,
    alt: 'TeamFlow Kanban board showing task columns with drag-and-drop cards organized by status: To Do, In Progress, and Done',
    label: 'Kanban Board',
  },
  {
    src: '/screenshots/teamflow-presence.png',
    width: 1280,
    height: 800,
    alt: 'TeamFlow real-time presence indicators showing team members online status with green activity dots',
    label: 'Real-Time Presence',
  },
  {
    src: '/screenshots/teamflow-task-modal.png',
    width: 1280,
    height: 800,
    alt: 'TeamFlow task creation modal with fields for title, description, assignee selection, and priority level',
    label: 'Task Creation & Assignment',
  },
  {
    src: '/screenshots/teamflow-rbac.png',
    width: 1280,
    height: 800,
    alt: 'TeamFlow team management page showing role-based access control with member roles: Owner, Admin, and Member',
    label: 'Role-Based Access Control',
  },
  {
    src: '/screenshots/teamflow-audit-log.png',
    width: 1280,
    height: 800,
    alt: 'TeamFlow audit log displaying a chronological history of team actions with timestamps and actor names',
    label: 'Audit Log',
  },
]

export const DEVCOLLAB_SCREENSHOTS: Screenshot[] = [
  {
    src: '/screenshots/devcollab-workspace.png',
    width: 1280,
    height: 800,
    alt: 'DevCollab workspace overview showing the main activity feed with recent messages, posts, and collaboration activity',
    label: 'Workspace Feed',
  },
  {
    src: '/screenshots/devcollab-code-snippet.png',
    width: 1280,
    height: 800,
    alt: 'DevCollab code snippet post with Shiki syntax highlighting rendering a TypeScript function in color-coded blocks',
    label: 'Code Snippets with Shiki',
  },
  {
    src: '/screenshots/devcollab-thread.png',
    width: 1280,
    height: 800,
    alt: 'DevCollab threaded discussion panel showing a message reply chain with @mention highlighting for referenced team members',
    label: 'Threaded Discussions',
  },
  {
    src: '/screenshots/devcollab-search.png',
    width: 1280,
    height: 800,
    alt: 'DevCollab Cmd+K search modal overlay showing full-text search results across messages, code snippets, and workspaces',
    label: 'Cmd+K Full-Text Search',
  },
  {
    src: '/screenshots/devcollab-activity.png',
    width: 1280,
    height: 800,
    alt: 'DevCollab activity feed and notification bell showing recent workspace events, mentions, and reply notifications',
    label: 'Activity & Notifications',
  },
]
```

Do NOT add `// No purple` comments — the design has no purple by convention already established.
  </action>
  <verify>
    <automated>cd /home/doctor/fernandomillan && npx tsc --noEmit --project apps/web/tsconfig.json 2>&1 | grep -i "screenshots-manifest" || echo "Manifest type-checks clean (or tsc not run yet — check manually)"</automated>
  </verify>
  <done>apps/web/src/data/screenshots-manifest.ts exists, exports Screenshot interface + TEAMFLOW_SCREENSHOTS array (5 items) + DEVCOLLAB_SCREENSHOTS array (5 items), all with width:1280 height:800, descriptive alt text, and short labels</done>
</task>

</tasks>

<verification>
- `ls apps/web/public/screenshots/*.png | wc -l` returns 10
- All 10 PNG files are 1280x800 (dimension check passes)
- apps/web/src/data/screenshots-manifest.ts exports Screenshot, TEAMFLOW_SCREENSHOTS (5), DEVCOLLAB_SCREENSHOTS (5)
- TypeScript compiles without errors in screenshots-manifest.ts
</verification>

<success_criteria>
1. `ls apps/web/public/screenshots/*.png | wc -l` → 10
2. Dimension check confirms all 10 files are 1280x800
3. `grep -c "src:" apps/web/src/data/screenshots-manifest.ts` → 10
4. Phase 39 executor can import `TEAMFLOW_SCREENSHOTS` and `DEVCOLLAB_SCREENSHOTS` without needing to inspect the screenshots directory
</success_criteria>

<output>
After completion, create `.planning/phases/38-screenshot-capture/38-03-SUMMARY.md` documenting:
- Final list of all 10 PNG files with their confirmed dimensions
- Any screenshots that needed dimension correction and how they were fixed
- The manifest file structure so Phase 39 planner knows the exact interface shape
</output>
