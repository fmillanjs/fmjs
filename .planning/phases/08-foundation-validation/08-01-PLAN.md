---
phase: 08-foundation-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/app/globals.css
  - .planning/phases/08-foundation-validation/TAILWIND-V4-TEST.md
  - .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md
autonomous: true
requirements: [FOUND-01, FOUND-03]

must_haves:
  truths:
    - "Developer can modify @theme token in globals.css and see changes in browser within 2 seconds"
    - "Test utility classes (bg-red-500) apply immediately without cache issues"
    - "CSS debugging workflow documented with clear troubleshooting steps"
  artifacts:
    - path: ".planning/phases/08-foundation-validation/TAILWIND-V4-TEST.md"
      provides: "Tailwind v4 configuration validation report"
      contains: "Test results showing CSS changes reflect immediately"
    - path: ".planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md"
      provides: "CSS debugging workflow documentation"
      contains: "Hard reload procedure, cache clearing, verification checklist"
    - path: "apps/web/app/globals.css"
      provides: "Functional @theme configuration"
      min_lines: 90
  key_links:
    - from: "apps/web/app/globals.css"
      to: "Browser rendering"
      via: "@import tailwindcss and @theme directive"
      pattern: "@import \"tailwindcss\""
---

<objective>
Validate that Tailwind v4 CSS configuration is functional and CSS changes reflect in browser immediately without hard reload, documenting debugging workflow to prevent Phase 07.1-03 caching issues.

Purpose: Establish confidence in CSS pipeline before any component work begins. Phase 07.1-03 failed because systemic design issues were treated with spot fixes - this plan validates the foundation works correctly first.

Output: Validated Tailwind v4 setup with documented debugging workflow preventing cache-related development friction.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/SUMMARY.md
@.planning/research/PITFALLS.md
@apps/web/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Validate Tailwind v4 configuration</name>
  <files>
    apps/web/app/globals.css
    .planning/phases/08-foundation-validation/TAILWIND-V4-TEST.md
  </files>
  <action>
    Verify Tailwind v4 setup is functional by testing the CSS pipeline:

    1. **Verify @import directive**: Confirm `@import "tailwindcss"` exists at line 1 of globals.css (not @tailwind directives from v3)

    2. **Test token modification hot-reload**:
       - Start dev server: `cd apps/web && npm run dev`
       - Open browser to http://localhost:3000
       - Modify a visible token in globals.css (e.g., change --color-primary from `oklch(55% 0.2 250)` to `oklch(75% 0.25 30)` - blue to orange)
       - Save file and observe browser WITHOUT manual refresh
       - Record time to see change (target: <2 seconds)
       - Revert the token change

    3. **Test utility class rendering**:
       - Add temporary test div to any page: `<div className="bg-red-500 text-white p-4">Tailwind v4 Test</div>`
       - Verify it renders with red background immediately
       - Try another utility: `bg-blue-600 border-4 border-green-500`
       - Remove test div after verification

    4. **Test @theme token consumption**:
       - Add test using CSS variable: `<div className="bg-[var(--color-primary)] text-[var(--color-primary-foreground)] p-4">Token Test</div>`
       - Verify it renders with primary color (blue)
       - Remove test div

    5. **Document findings**: Create TAILWIND-V4-TEST.md with:
       - Tailwind v4 version from package.json
       - Hot reload time measured (should be <2 seconds)
       - Test results (PASS/FAIL) for each check
       - Any warnings or errors observed
       - Browser used for testing
       - Node.js version

    If any test fails: Document failure mode, check for common issues (wrong filename global.css vs globals.css, missing @import, .next cache stale), clear .next cache and retry.
  </action>
  <verify>
    ```bash
    # Verify files exist
    test -f .planning/phases/08-foundation-validation/TAILWIND-V4-TEST.md

    # Verify @import directive
    grep -q '@import "tailwindcss"' apps/web/app/globals.css

    # Check report contains test results
    grep -q "PASS\|FAIL" .planning/phases/08-foundation-validation/TAILWIND-V4-TEST.md
    ```
  </verify>
  <done>
    TAILWIND-V4-TEST.md exists documenting all test results showing CSS changes reflect in browser within 2 seconds, utility classes work immediately, and @theme tokens are consumable.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document CSS debugging workflow</name>
  <files>
    .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md
  </files>
  <action>
    Create comprehensive CSS debugging workflow documentation to prevent caching issues that plagued Phase 07.1-03 (developer modified CSS, saw no changes, wasted time).

    Document the following procedures in CSS-DEBUG-WORKFLOW.md:

    **1. Standard CSS Change Workflow**:
    - Modify globals.css @theme token
    - Save file (Ctrl+S / Cmd+S)
    - Wait 1-2 seconds for Vite HMR
    - Browser auto-refreshes (no manual action needed)
    - Expected: Changes visible immediately

    **2. When Changes Don't Appear (Troubleshooting Checklist)**:

    Step 1 - Hard Reload Browser:
    - Chrome/Edge: Ctrl+Shift+R (Windows/Linux), Cmd+Shift+R (Mac)
    - Firefox: Ctrl+F5 (Windows/Linux), Cmd+Shift+R (Mac)
    - Safari: Cmd+Option+R
    - Expected: Clears browser CSS cache

    Step 2 - Clear Next.js Build Cache:
    ```bash
    cd apps/web
    rm -rf .next
    npm run dev
    ```
    Expected: Forces full rebuild

    Step 3 - Verify File Name and Location:
    - File MUST be `apps/web/app/globals.css` (NOT global.css, NOT styles/globals.css)
    - File MUST be imported in root layout: `import './globals.css'`

    Step 4 - Check Browser DevTools:
    - Open DevTools (F12)
    - Network tab → "Disable cache" checkbox enabled
    - Console tab → check for CSS errors
    - Elements tab → inspect element → Computed styles shows expected values

    Step 5 - Verify Tailwind Configuration:
    - Check `@import "tailwindcss"` at top of globals.css
    - Check package.json has `@tailwindcss/postcss: ^4.x.x`
    - Check postcss.config.mjs has `@tailwindcss/postcss` plugin

    **3. Prevention Strategies**:
    - Enable "Disable cache" in DevTools during CSS work
    - Use hard reload (Ctrl+Shift+R) as first troubleshooting step, not last
    - Test with simple utility class first (bg-red-500) before complex token changes
    - Check browser console for errors immediately after save
    - If HMR fails 2+ times in a row, restart dev server

    **4. Validation Checklist** (run after any @theme change):
    - [ ] Browser shows updated styles
    - [ ] Console has no CSS errors
    - [ ] Hard reload doesn't change appearance (confirms styles persisted)
    - [ ] Computed styles in DevTools match expected values

    **5. Common Pitfalls** (from Phase 07.1-03 research):
    - Modifying wrong file (global.css vs globals.css)
    - Browser cache not cleared (stale CSS served)
    - .next cache not cleared after major changes
    - Testing in production build instead of dev server
    - Forgetting to save file (Ctrl+S)

    Format as step-by-step guide with clear headers, code blocks, and expected outcomes for each step.
  </action>
  <verify>
    ```bash
    # Verify workflow doc exists
    test -f .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md

    # Verify contains key sections
    grep -q "Hard Reload" .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md
    grep -q "Troubleshooting Checklist" .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md
    grep -q "Validation Checklist" .planning/phases/08-foundation-validation/CSS-DEBUG-WORKFLOW.md
    ```
  </verify>
  <done>
    CSS-DEBUG-WORKFLOW.md exists with complete debugging procedures, troubleshooting checklist, prevention strategies, and validation checklist ready for developer reference.
  </done>
</task>

</tasks>

<verification>
Run all verification commands from tasks. Confirm:
- Tailwind v4 configuration is functional (test report shows PASS)
- CSS changes reflect in browser within 2 seconds
- Debugging workflow documented with clear troubleshooting steps
</verification>

<success_criteria>
- Developer can modify any @theme token and see changes immediately
- Test utility classes (bg-red-500) work without cache issues
- CSS debugging workflow prevents Phase 07.1-03 caching frustration
- Documentation exists for future developers encountering CSS issues
</success_criteria>

<output>
After completion, create `.planning/phases/08-foundation-validation/08-01-SUMMARY.md` using the standard summary template.
</output>
