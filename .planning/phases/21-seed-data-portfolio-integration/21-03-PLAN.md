---
phase: 21-seed-data-portfolio-integration
plan: 03
type: execute
wave: 2
depends_on: [21-01, 21-02]
files_modified: []
autonomous: false
requirements: [SEED-01, SEED-02, PORT-01, PORT-02, PORT-03]

must_haves:
  truths:
    - "A recruiter can navigate to the portfolio homepage and see both TeamFlow and DevCollab project cards"
    - "Clicking the DevCollab card opens a case study at /projects/devcollab with working 'View Live Demo' and 'View Source' buttons"
    - "The DevCollab live demo opens to the pre-seeded workspace at /w/devcollab-demo after login"
    - "All three demo roles can be logged in (Admin / Contributor / Viewer) and see the seeded content"
    - "Running the seed script twice is idempotent — second run prints 'Seed already applied — skipping'"
  artifacts:
    - path: "packages/devcollab-database/prisma/seed.ts"
      provides: "Idempotent seed with faker.seed(42)"
      contains: "Seed already applied"
    - path: "apps/web/app/(portfolio)/projects/devcollab/page.tsx"
      provides: "Case study with live demo link"
      contains: "devcollab-demo"
    - path: "apps/web/app/(portfolio)/page.tsx"
      provides: "Homepage with two project cards"
      contains: "DevCollab"
    - path: "docker-compose.yml"
      provides: "devcollab-seed docker service"
      contains: "devcollab-seed"
  key_links:
    - from: "Portfolio /projects/devcollab"
      to: "NEXT_PUBLIC_DEVCOLLAB_URL/w/devcollab-demo"
      via: "View Live Demo button href"
      pattern: "devcollab-demo"
    - from: "DevCollab login page"
      to: "/w/devcollab-demo"
      via: "router.push after successful login"
      pattern: "router.push.*devcollab-demo"
---

<objective>
Human verification that the seed data and portfolio integration work end-to-end from a recruiter's perspective: portfolio site shows DevCollab, case study is complete, live demo workspace has realistic content, all three role accounts work.

Purpose: Confirm the phase goal is fully achieved — recruiters can interact with the DevCollab demo immediately on first visit.
Output: Human approval or identified issues to fix
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/21-seed-data-portfolio-integration/21-01-SUMMARY.md
@.planning/phases/21-seed-data-portfolio-integration/21-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run seed against live devcollab-postgres and verify database state</name>
  <files></files>
  <action>
Check if devcollab-postgres is running. If not, start it:

```bash
docker compose -f /home/doctor/fernandomillan/docker-compose.yml up devcollab-postgres -d
# Wait for healthy
docker compose -f /home/doctor/fernandomillan/docker-compose.yml ps devcollab-postgres
```

Run seed script directly:
```bash
cd /home/doctor/fernandomillan
DEVCOLLAB_DATABASE_URL="postgresql://devcollab:devcollab@localhost:5435/devcollab" \
  node_modules/.bin/tsx packages/devcollab-database/prisma/seed.ts
```

Expected first-run output ends with:
```
Seed complete — DevCollab demo workspace ready
  Workspace URL: /w/devcollab-demo
  Admin:       admin@demo.devcollab / Demo1234!
  Contributor: contributor@demo.devcollab / Demo1234!
  Viewer:      viewer@demo.devcollab / Demo1234!
```

Run idempotency check (second run):
```bash
DEVCOLLAB_DATABASE_URL="postgresql://devcollab:devcollab@localhost:5435/devcollab" \
  node_modules/.bin/tsx packages/devcollab-database/prisma/seed.ts
```

Expected: `Seed already applied — skipping`

Verify database records:
```bash
docker exec devcollab-postgres psql -U devcollab -d devcollab \
  -c "SELECT email, name FROM users ORDER BY email;" \
  -c "SELECT slug, name FROM workspaces;" \
  -c "SELECT language, title FROM snippets ORDER BY language;" \
  -c "SELECT title, status FROM posts ORDER BY \"publishedAt\";" \
  -c "SELECT type, \"entityType\" FROM activity_events ORDER BY type;"
```

Expected results:
- 3 users: admin@demo.devcollab (Alex Admin), contributor@demo.devcollab (Casey Contributor), viewer@demo.devcollab (Victor Viewer)
- 1 workspace: devcollab-demo
- 5 snippets with languages: go, python, rust, sql, typescript
- 3 posts all with status 'Published'
- Activity events: 3x MemberJoined, 3x PostCreated, 5x SnippetCreated = 11 total

If the devcollab-postgres has never had migrations run, run migrations first:
```bash
cd /home/doctor/fernandomillan
DEVCOLLAB_DATABASE_URL="postgresql://devcollab:devcollab@localhost:5435/devcollab" \
  node_modules/.bin/prisma migrate deploy --schema=packages/devcollab-database/prisma/schema.prisma
```

Then re-run the seed.
  </action>
  <verify>
    Second run of seed script prints "Seed already applied — skipping" with exit code 0.
    Database has exactly 3 users, 1 workspace (devcollab-demo), 5 snippets, 3 published posts, 11+ activity events.
  </verify>
  <done>
    Seed is idempotent. Database contains the expected demo workspace with all required content.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verify seed data and portfolio integration end-to-end</name>
  <files></files>
  <action>Pause for human verification — see how-to-verify section below for exact steps.</action>
  <verify>Human confirms all checks in how-to-verify pass and types "approved".</verify>
  <done>Human has approved all portfolio and seed data checks.</done>
  <what-built>
    Phase 21 complete: deterministic seed script + docker-compose devcollab-seed service + DevCollab portfolio pages (homepage card, projects card, case study at /projects/devcollab) + DevCollab login page with demo credential hints.
  </what-built>
  <how-to-verify>
    **1. Portfolio site (http://localhost:3000):**

    a. Visit the homepage. Confirm you see TWO project cards: TeamFlow and DevCollab side by side.

    b. Click the DevCollab card. Confirm you land at /projects/devcollab with:
       - A case study with "Overview", "Problem", "Architecture", "Key Technical Decisions", "Challenges & Solutions", "Results" sections
       - A "View Live Demo" button (links to DevCollab)
       - A "View Source" button (links to GitHub)
       - Demo credentials panel at the bottom showing all three accounts
       - No purple colors anywhere

    c. Visit /projects. Confirm both TeamFlow and DevCollab ProjectCards are visible in the grid.

    **2. DevCollab login page (http://localhost:3002/login):**

    a. The "Demo Credentials" box shows:
       - admin@demo.devcollab / Demo1234!
       - contributor@demo.devcollab / Demo1234!
       - viewer@demo.devcollab / Demo1234!

    b. Log in with admin@demo.devcollab / Demo1234! — confirm redirect lands at /w/devcollab-demo

    c. Verify the demo workspace shows:
       - Workspace name "DevCollab Demo"
       - At least 3 published posts in the posts list
       - At least 5 snippets in the snippets list
       - Activity feed shows MemberJoined, PostCreated, SnippetCreated events
       - Bell icon shows unread notification count (from @mention comments)

    d. Log out. Log in with contributor@demo.devcollab / Demo1234! — confirm this user can see the workspace but cannot manage members (Contributor role).

    e. Log out. Log in with viewer@demo.devcollab / Demo1234! — confirm this user can view content but gets 403 on any write action (Viewer role).

    **3. Seed idempotency:**

    Confirm that running the seed script twice does NOT create duplicate records. Check the database user count stays at 3 after a second run.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Final phase verification. All five requirement IDs must be satisfied:

- SEED-01: Demo workspace exists on first launch with 3 users, 5+ snippets, 3+ published posts, activity feed
- SEED-02: All three roles (Admin, Contributor, Viewer) can log in and see role-appropriate content
- PORT-01: DevCollab project card on portfolio homepage alongside TeamFlow
- PORT-02: Case study at /projects/devcollab with technology decisions and lessons learned
- PORT-03: Case study and login page link to live demo at NEXT_PUBLIC_DEVCOLLAB_URL/w/devcollab-demo
</verification>

<success_criteria>
Human approves all checks:
- Portfolio homepage shows DevCollab and TeamFlow cards
- /projects/devcollab case study exists with all sections, live demo link, no purple
- /projects listing shows both project cards
- DevCollab login page has demo credentials and redirects to /w/devcollab-demo
- All three role accounts log in and see the seeded workspace content
- Seed is idempotent (second run skips without creating duplicates)
</success_criteria>

<output>
After completion, create `.planning/phases/21-seed-data-portfolio-integration/21-03-SUMMARY.md`
</output>
