---
phase: 02-core-work-management
plan: 11
type: execute
wave: 9
depends_on: ["02-10"]
files_modified:
  - packages/database/prisma/seed.ts
  - packages/database/package.json
  - apps/web/components/layout/sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Demo workspace exists with realistic seeded data"
    - "Demo workspace has team with 10+ members of different roles"
    - "Demo workspace has 3+ projects with 15+ tasks each"
    - "Tasks have varied statuses, priorities, assignees, labels, and comments"
    - "Recruiter can log in as demo user and immediately interact with populated workspace"
    - "Seed script is idempotent (can run multiple times safely)"
  artifacts:
    - path: "packages/database/prisma/seed.ts"
      provides: "Faker-based seed script for demo workspace"
      contains: "faker"
    - path: "packages/database/package.json"
      provides: "prisma.seed configuration"
      contains: "seed"
  key_links:
    - from: "packages/database/prisma/seed.ts"
      to: "prisma.organization"
      via: "upsert demo workspace"
      pattern: "upsert.*demo-workspace"
    - from: "packages/database/prisma/seed.ts"
      to: "@faker-js/faker"
      via: "realistic data generation"
      pattern: "faker\\."
---

<objective>
Create Prisma seed script using @faker-js/faker to generate a realistic demo workspace with teams, members, projects, tasks (with varied statuses/priorities), labels, comments, and audit log entries. The demo workspace enables recruiters to immediately interact with a populated application.

Purpose: The demo workspace is critical for the portfolio showcase. Recruiters should see a living, populated application — not an empty shell. Realistic data with proper distribution across statuses/priorities makes the Kanban board visually impressive.
Output: Idempotent seed script and populated demo workspace
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-work-management/02-RESEARCH.md
@packages/database/prisma/schema.prisma
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive Faker-based seed script for demo workspace</name>
  <files>
    packages/database/prisma/seed.ts
    packages/database/package.json
  </files>
  <action>
    Install @faker-js/faker: `npm install -D @faker-js/faker --workspace=packages/database`
    Install tsx for running seed: `npm install -D tsx --workspace=packages/database`

    **Add to packages/database/package.json:**
    ```json
    "prisma": {
      "seed": "tsx prisma/seed.ts"
    }
    ```

    **Create packages/database/prisma/seed.ts** (following 02-RESEARCH.md pattern):

    Use upsert throughout for idempotency (safe to run multiple times).

    **1. Demo Organization:**
    - Name: "Demo Workspace"
    - Slug: "demo-workspace"
    - Upsert by slug

    **2. Demo Users (10 users):**
    - demo1@teamflow.dev through demo10@teamflow.dev
    - demo1: ADMIN role (password: "Password123")
    - demo2-3: MANAGER role
    - demo4-10: MEMBER role
    - Use faker for realistic first/last names
    - Upsert by email
    - Hash passwords with bcrypt (saltRounds: 10)

    **3. Memberships:**
    - All 10 users are members of Demo Workspace
    - Roles match user roles (demo1=ADMIN, demo2-3=MANAGER, demo4-10=MEMBER)
    - Upsert by userId_organizationId

    **4. Labels (8 labels):**
    - Bug (#ef4444 red), Feature (#3b82f6 blue), Documentation (#22c55e green), Enhancement (#f97316 orange), Urgent (#f43f5e rose), Design (#06b6d4 cyan), Backend (#64748b slate), Frontend (#eab308 yellow)
    - Upsert by organizationId_name

    **5. Projects (3 projects):**
    - "Product Launch" — active, description about launching new product features
    - "Website Redesign" — active, description about modernizing the website
    - "Q1 Marketing Campaign" — archived (demonstrates archived state)
    - Upsert by organizationId_name

    **6. Tasks (15-20 per project = ~50 total):**
    - Use faker.hacker.phrase() for titles (tech-relevant)
    - faker.lorem.paragraphs(2) for descriptions
    - Distribute statuses: ~30% TODO, ~25% IN_PROGRESS, ~30% DONE, ~15% BLOCKED
    - Distribute priorities: ~20% LOW, ~35% MEDIUM, ~30% HIGH, ~15% URGENT
    - Randomly assign to team members
    - Random due dates: some past (overdue), some future, some null
    - Connect 1-3 random labels per task
    - Set createdBy to random team member
    - Set position incrementally per status column for ordering

    **7. Comments (2-5 per task):**
    - faker.lorem.paragraph() for content
    - Random author from team members
    - Random createdAt within last 14 days
    - Order matters: earlier comments have earlier dates

    **8. Audit Log entries (seed some history):**
    - Create 20-30 audit entries showing realistic activity:
      - Task created events
      - Status change events (with changes: {previous: 'TODO', current: 'IN_PROGRESS'})
      - Assignment events
      - Comment events
    - Spread over last 14 days for realistic timeline
    - Various actors from the team

    **Console output:**
    - Log progress: "Seeding demo workspace..."
    - Log counts: "Created X users, X projects, X tasks, X comments"
    - Final: "Demo workspace seeded successfully. Login: demo1@teamflow.dev / Password123"

    **Script structure:**
    ```typescript
    async function main() {
      // 1. Create org
      // 2. Create users
      // 3. Create memberships
      // 4. Create labels
      // 5. Create projects
      // 6. Create tasks with labels
      // 7. Create comments
      // 8. Create audit entries
    }
    main().catch(console.error).finally(() => prisma.$disconnect());
    ```
  </action>
  <verify>
    Run seed: `cd packages/database && npx prisma db seed`
    Verify:
    1. No errors during seed execution
    2. Query: `npx prisma db execute --stdin <<< "SELECT count(*) FROM \"Organization\";"` → 1+
    3. Query users: 10+ demo users exist
    4. Query tasks: 45+ tasks across 3 projects
    5. Run seed again (idempotent): no errors, same data counts
    6. Login to app as demo1@teamflow.dev / Password123 → see populated workspace
  </verify>
  <done>Seed script creates complete demo workspace with 10 users, 3 projects, 50+ tasks, labels, comments, and audit history. Idempotent. Demo login credentials work.</done>
</task>

<task type="auto">
  <name>Task 2: Verify complete Phase 2 end-to-end and update sidebar with demo workspace</name>
  <files>
    apps/web/components/layout/sidebar.tsx
  </files>
  <action>
    **Update sidebar to highlight demo workspace:**
    - If user is member of "Demo Workspace", show it prominently in sidebar
    - Consider: show demo workspace first or with a special badge

    **End-to-end verification checklist:**
    Run through ALL Phase 2 success criteria:

    1. **Teams:** Login as demo1@teamflow.dev. View Demo Workspace team. See 10 members with roles. Invite flow available (admin). Remove member flow available (admin).

    2. **Projects:** Navigate to Demo Workspace projects. See 3 projects (2 active, 1 archived). Click into "Product Launch". See project details. Edit name. Archive a project. (Skip delete to preserve demo data.)

    3. **Tasks:** On project page, see Kanban board with tasks in 4 columns. Drag a task from TODO to IN_PROGRESS — status updates. Toggle to list view — see all tasks with sortable columns. Click "New Task" — create task with all fields. Edit a task inline.

    4. **Comments:** Click a task to open detail. See existing comments. Add a new comment. Comment appears in thread.

    5. **History:** On task detail, view history tab showing all changes.

    6. **Filters:** Apply status filter — only matching tasks shown. Search "keyword" — results filtered. Clear filters — all tasks return.

    7. **Activity Feed:** Navigate to project activity feed. See timeline of recent actions. Scroll for more.

    8. **Audit Log:** As admin (demo1), navigate to team audit log. Search, filter, paginate. Non-admin cannot access.

    **Document any issues found** in the SUMMARY.md. If critical issues exist, note them but do NOT create new plans — gap closure will handle them if needed.
  </action>
  <verify>
    All 8 success criteria from ROADMAP.md verified:
    1. User can create teams, invite members, view member roles, manage membership ✓
    2. User can create projects, edit, archive, delete (admin) ✓
    3. User can create tasks with all fields ✓
    4. User can edit, delete, comment, view history ✓
    5. User can view Kanban and List with drag-and-drop ✓
    6. User can filter by status/priority/assignee/labels, search ✓
    7. User can view activity feed, admin can view audit log ✓
    8. Demo workspace with seeded data ready for recruiter interaction ✓
  </verify>
  <done>Phase 2 complete. Demo workspace populated with realistic data. All 8 success criteria verified. Recruiter can log in as demo1@teamflow.dev / Password123 and immediately interact with teams, projects, tasks, Kanban board, filters, comments, history, and activity feed.</done>
</task>

</tasks>

<verification>
1. Seed script runs without errors
2. Seed is idempotent (second run doesn't duplicate)
3. Demo login works: demo1@teamflow.dev / Password123
4. All Phase 2 success criteria met
5. Kanban board has visually impressive distribution of tasks
6. Activity feed has realistic 2-week history
</verification>

<success_criteria>
- TEAM-05: Demo workspace seeded with sample data
- All 8 Phase 2 success criteria verified end-to-end
- Demo ready for recruiter interaction
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-work-management/02-11-SUMMARY.md`
</output>
