---
phase: 02-core-work-management
plan: 06
type: execute
wave: 5
depends_on: ["02-03"]
files_modified:
  - apps/web/app/(dashboard)/teams/[teamId]/projects/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/new/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/page.tsx
  - apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/settings/page.tsx
  - apps/web/components/projects/project-list.tsx
  - apps/web/components/projects/project-form.tsx
  - apps/web/components/projects/project-card.tsx
autonomous: true

must_haves:
  truths:
    - "User can view all projects in their team as card grid"
    - "User can create a new project via form"
    - "User can edit project name and description"
    - "User can archive a project"
    - "Admin can delete a project"
  artifacts:
    - path: "apps/web/app/(dashboard)/teams/[teamId]/projects/page.tsx"
      provides: "Project list page"
    - path: "apps/web/components/projects/project-card.tsx"
      provides: "Project card component with task count"
    - path: "apps/web/components/projects/project-form.tsx"
      provides: "Project create/edit form"
  key_links:
    - from: "apps/web/components/projects/project-list.tsx"
      to: "/api"
      via: "API client fetch"
      pattern: "api\\.get.*projects"
    - from: "apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/page.tsx"
      to: "/teams/[teamId]/projects/[projectId]"
      via: "navigation to project detail (task views)"
      pattern: "projectId"
---

<objective>
Build Projects frontend pages: project list (card grid), project creation form, project detail/settings with edit, archive, and delete functionality.

Purpose: Projects are the container for tasks. Users need to navigate to a project before viewing its tasks (Kanban/List view built in Plans 07-08).
Output: Working project management UI within teams
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-work-management/02-RESEARCH.md
@.planning/phases/02-core-work-management/02-03-SUMMARY.md
@.planning/phases/02-core-work-management/02-05-SUMMARY.md
@apps/web/lib/api.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project list and project creation pages</name>
  <files>
    apps/web/app/(dashboard)/teams/[teamId]/projects/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/projects/new/page.tsx
    apps/web/components/projects/project-list.tsx
    apps/web/components/projects/project-card.tsx
    apps/web/components/projects/project-form.tsx
  </files>
  <action>
    **Create components/projects/project-card.tsx:**
    - Displays: project name, description (truncated to 2 lines), status badge (ACTIVE green, ARCHIVED gray), task count, created date (relative using date-fns: "2 days ago")
    - Clickable card linking to /teams/[teamId]/projects/[projectId]
    - Hover effect (shadow lift)
    - Status badge color: ACTIVE = green, ARCHIVED = gray

    **Create components/projects/project-list.tsx:**
    - Client component receiving projects array as prop
    - Renders grid of ProjectCard components (3 cols on lg, 2 on md, 1 on sm)
    - Tabs or filter: "Active" / "Archived" / "All" to filter by status
    - Empty state per tab: "No active projects. Create one to get started." / "No archived projects."

    **Create components/projects/project-form.tsx:**
    - Client component with React Hook Form + Zod resolver
    - Fields: name (required, 2-100 chars), description (optional textarea, max 2000 chars)
    - Props: `mode: 'create' | 'edit'`, optional `defaultValues` for edit mode
    - onSubmit: POST /teams/:teamId/projects (create) or PATCH /projects/:id (edit)
    - Loading state, success toast, redirect

    **Create projects/page.tsx (project list):**
    - Server Component
    - Fetch projects from API: GET /teams/:teamId/projects
    - Render ProjectList component
    - "New Project" button linking to /teams/[teamId]/projects/new
    - Page title: "Projects" with team name context

    **Create projects/new/page.tsx:**
    - Render ProjectForm in create mode
    - Page title: "New Project"
    - Back link to project list

    Install date-fns if not already: `npm install date-fns --workspace=apps/web`
  </action>
  <verify>
    1. /teams/[teamId]/projects shows project list (empty state if none)
    2. /teams/[teamId]/projects/new shows create form
    3. Submit form creates project and redirects to project list
    4. Project cards show name, description, task count
    5. Active/Archived filter works
  </verify>
  <done>Project list with card grid and project creation form working. Cards show task counts and status. Active/Archived filtering works.</done>
</task>

<task type="auto">
  <name>Task 2: Create project detail page with edit, archive, and delete</name>
  <files>
    apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/page.tsx
    apps/web/app/(dashboard)/teams/[teamId]/projects/[projectId]/settings/page.tsx
  </files>
  <action>
    **Create projects/[projectId]/page.tsx (project detail):**
    - Server Component
    - Fetch project from API: GET /projects/:projectId
    - This page will be the CONTAINER for task views (Kanban/List)
    - For now, show:
      - Project name and description
      - Status badge
      - "Settings" link (gear icon) to /teams/[teamId]/projects/[projectId]/settings
      - Placeholder area: "Task views coming in Plan 07" — this area will be replaced with Kanban/List in future plans
      - Quick stats: total tasks, tasks by status (if available from API)
    - Navigation breadcrumb: Team > Projects > [Project Name]

    **Create projects/[projectId]/settings/page.tsx:**
    - Project settings page
    - Edit form (reuse ProjectForm in edit mode with current values)
    - Archive button: calls PATCH /projects/:id/archive, shows confirmation dialog first
    - Delete button (admin only): calls DELETE /projects/:id, shows destructive confirmation dialog, redirects to project list after deletion
    - Admin check: get user role from session or API, show/hide delete button accordingly
    - Back link to project detail page

    Both pages handle loading states and errors (project not found → redirect or 404 page).
  </action>
  <verify>
    1. /teams/[teamId]/projects/[projectId] shows project detail
    2. /teams/[teamId]/projects/[projectId]/settings shows edit form with current values
    3. Edit form updates project name/description
    4. Archive button changes status to ARCHIVED
    5. Delete button visible only for admin users
    6. Delete confirmation dialog works, deletes project, redirects
    7. Breadcrumb navigation works
  </verify>
  <done>Project detail page with settings, edit, archive, and admin-only delete. Navigation breadcrumbs in place. Project detail page ready to host task views in Plan 07.</done>
</task>

</tasks>

<verification>
1. Full project navigation flow: list → create → detail → settings
2. CRUD operations work via API
3. Archive changes project status
4. Delete restricted to admin role
5. Responsive card grid layout
6. Empty states render correctly
</verification>

<success_criteria>
- PROJ-01: User can create projects within a team (UI)
- PROJ-02: User can view all projects in their team (UI)
- PROJ-03: User can edit project details (UI)
- PROJ-04: User can archive completed projects (UI)
- PROJ-05: Admin can delete projects (UI)
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-work-management/02-06-SUMMARY.md`
</output>
