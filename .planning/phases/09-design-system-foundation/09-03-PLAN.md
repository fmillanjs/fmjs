---
phase: 09-design-system-foundation
plan: 03
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - apps/web/eslint.config.mjs
  - apps/web/DESIGN-SYSTEM.md
autonomous: true
requirements: [COMP-05]

must_haves:
  truths:
    - "eslint.config.mjs exists in apps/web/ with no-restricted-imports governance rules"
    - "Hard errors trigger on deprecated component imports in new files"
    - "Existing files are exempt from governance (listed in ignores)"
    - "DESIGN-SYSTEM.md documents available components with basic usage examples"
  artifacts:
    - path: "apps/web/eslint.config.mjs"
      provides: "ESLint governance rules blocking deprecated import patterns"
      contains: "no-restricted-imports"
    - path: "apps/web/DESIGN-SYSTEM.md"
      provides: "Component catalog with usage examples"
      contains: "Button"
  key_links:
    - from: "apps/web/eslint.config.mjs"
      to: "apps/web/components/ui/skeleton.tsx"
      via: "ignores array (exempt from governance)"
      pattern: "skeleton\\.tsx"
---

<objective>
Create ESLint governance rules that hard-error on deprecated component imports in new files, and document the design system in DESIGN-SYSTEM.md.

Purpose: Prevents developers from importing old hand-rolled components in new code, enforcing migration to Shadcn components. Existing files remain exempt until Phases 10-12 migrate them. DESIGN-SYSTEM.md provides discoverable component catalog.

Output: apps/web/eslint.config.mjs with scoped no-restricted-imports rules, and apps/web/DESIGN-SYSTEM.md listing all installed components with usage examples.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-design-system-foundation/09-RESEARCH.md
@.planning/phases/09-design-system-foundation/09-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ESLint governance config</name>
  <files>apps/web/eslint.config.mjs</files>
  <action>
Create apps/web/eslint.config.mjs with the following content.

**Context:** No ESLint config currently exists in apps/web/ — this is a new file. Next.js 15 uses flat config format. Governance rules use `no-restricted-imports` scoped to new files only via the `files` + `ignores` pattern. Existing component files are listed in `ignores` to remain exempt until Phases 10-12 migrate them.

**Critical pitfall to avoid:** ESLint `no-restricted-imports` catches import statements only — NOT className string contents. The 285+ instances of `dark:bg-gray-*` in existing code cannot be caught by ESLint alone. Accept this limitation and document it in DESIGN-SYSTEM.md as a code-review gate.

```javascript
import { FlatCompat } from '@eslint/eslintrc';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

export default [
  // Next.js base config (core-web-vitals + typescript)
  ...compat.extends('next/core-web-vitals', 'next/typescript'),

  // ================================================================
  // Design System Governance: Hard errors on deprecated component
  // imports in NEW files. Build fails if a new file imports old
  // hand-rolled components instead of Shadcn UI components.
  //
  // Scope: components/**/*.tsx, app/**/*.tsx (new files in these dirs)
  // Exempt: All existing files listed in ignores below
  // ================================================================
  {
    files: ['components/**/*.tsx', 'app/**/*.tsx'],
    ignores: [
      // Existing UI components — exempt until Phase 10 migration
      'components/ui/skeleton.tsx',
      'components/ui/theme-toggle.tsx',
      'components/ui/command-palette.tsx',
      'components/ui/empty-state.tsx',
      'components/ui/conflict-warning.tsx',

      // Existing feature components — exempt until Phases 11-12 migration
      'components/tasks/**',
      'components/projects/**',
      'components/project/**',
      'components/portfolio/**',
      'components/activity/**',
      'components/auth/**',
      'components/layout/**',
      'components/teams/**',
      'components/providers/**',

      // Shadcn-installed components themselves (not restricted)
      'components/ui/button.tsx',
      'components/ui/card.tsx',
      'components/ui/input.tsx',
      'components/ui/label.tsx',
      'components/ui/dialog.tsx',
      'components/ui/badge.tsx',
      'components/ui/separator.tsx',
      'components/ui/sonner.tsx',
    ],
    rules: {
      'no-restricted-imports': [
        'error',
        {
          patterns: [
            {
              // Restrict importing old hand-rolled skeleton (use Shadcn skeleton instead)
              group: [
                '**/components/ui/skeleton',
                '../ui/skeleton',
                './skeleton',
              ],
              message:
                'DESIGN SYSTEM: Import Skeleton from @/components/ui/skeleton (Shadcn). Old hand-rolled skeleton is deprecated. See apps/web/DESIGN-SYSTEM.md.',
            },
            {
              // Restrict importing old empty-state (use Shadcn Card/description patterns instead)
              group: [
                '**/components/ui/empty-state',
                '../ui/empty-state',
                './empty-state',
              ],
              message:
                'DESIGN SYSTEM: EmptyState is deprecated. Use Card + description text pattern with Shadcn components. See apps/web/DESIGN-SYSTEM.md.',
            },
            {
              // Restrict importing old conflict-warning (use Shadcn Alert/Dialog instead)
              group: [
                '**/components/ui/conflict-warning',
                '../ui/conflict-warning',
                './conflict-warning',
              ],
              message:
                'DESIGN SYSTEM: ConflictWarning is deprecated. Use Shadcn Dialog or Alert pattern instead. See apps/web/DESIGN-SYSTEM.md.',
            },
          ],
        },
      ],
    },
  },
];
```

After creating the file, check if `@eslint/eslintrc` is installed:
```bash
ls apps/web/node_modules/@eslint/eslintrc 2>/dev/null || echo "NOT FOUND"
```

If NOT FOUND, install it:
```bash
npm install @eslint/eslintrc --workspace=apps/web --save-dev
```

Then verify the ESLint config is valid by running lint on a test file:
```bash
cd apps/web && npx eslint components/ui/button.tsx --no-eslintignore 2>&1 | head -20
```

If Next.js 15's built-in ESLint does not need FlatCompat (it may support extends directly), adjust accordingly. The key requirement is that the `no-restricted-imports` rule is active and scoped correctly.

**Alternative if FlatCompat causes issues:** Next.js 15 ships with built-in ESLint flat config support. If `compat.extends` fails, use:
```javascript
// Simplified version without FlatCompat (if Next.js 15 supports it natively)
export default [
  {
    files: ['components/**/*.tsx', 'app/**/*.tsx'],
    ignores: [/* same ignores list */],
    rules: {
      'no-restricted-imports': ['error', { patterns: [/* same patterns */] }],
    },
  },
];
```
In this case, Next.js 15's built-in linting handles the core-web-vitals rules separately via next.config.ts.
  </action>
  <verify>
```bash
# Verify file exists
cat apps/web/eslint.config.mjs | grep "no-restricted-imports"

# Test that new files would get the restriction (create temp test)
echo "import { EmptyState } from '../ui/empty-state'; export default function Test() { return null; }" > /tmp/test-governance.tsx
cd apps/web && npx eslint /tmp/test-governance.tsx 2>&1 | grep -i "deprecated\|restricted\|DESIGN SYSTEM"
rm -f /tmp/test-governance.tsx

# Verify existing files are NOT restricted (skeleton.tsx should pass)
cd apps/web && npx eslint components/ui/skeleton.tsx 2>&1 | grep -i "error" | grep -v "eslint" | head -5
```
  </verify>
  <done>eslint.config.mjs exists with no-restricted-imports governance. Running ESLint on a hypothetical new file importing EmptyState or skeleton reports an error. Running ESLint on existing exempt files (skeleton.tsx, theme-toggle.tsx) passes without governance errors.</done>
</task>

<task type="auto">
  <name>Task 2: Create DESIGN-SYSTEM.md component catalog</name>
  <files>apps/web/DESIGN-SYSTEM.md</files>
  <action>
Create apps/web/DESIGN-SYSTEM.md. This document is the discoverable reference for the design system. Keep it brief and practical — not exhaustive documentation.

The file should cover:
1. Available Shadcn components (will be installed in Plan 04)
2. Import paths
3. Color token reference (key semantic tokens)
4. Governance rules and what they enforce
5. Dark mode notes
6. Basic usage examples for each component

```markdown
# Design System

**Stack:** Shadcn UI (new-york style) + Radix Colors + Tailwind v4

---

## Available Components

All components live in `@/components/ui/`. Import by name:

| Component | Import | Use For |
|-----------|--------|---------|
| Button | `@/components/ui/button` | Primary actions, form submissions |
| Card | `@/components/ui/card` | Content containers, project cards |
| Input | `@/components/ui/input` | Text entry fields |
| Label | `@/components/ui/label` | Form field labels |
| Dialog | `@/components/ui/dialog` | Modal overlays, confirmations |
| Badge | `@/components/ui/badge` | Status tags, tech stack chips |
| Separator | `@/components/ui/separator` | Layout dividers |
| Sonner | `@/components/ui/sonner` | Toast notifications |

---

## Usage Examples

### Button
```tsx
import { Button } from "@/components/ui/button"

// Variants: default | destructive | outline | secondary | ghost | link
<Button variant="default">Save changes</Button>
<Button variant="destructive">Delete</Button>
<Button variant="outline">Cancel</Button>
```

### Card
```tsx
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"

<Card>
  <CardHeader>
    <CardTitle>Project Name</CardTitle>
  </CardHeader>
  <CardContent>
    <p>Content goes here</p>
  </CardContent>
</Card>
```

### Input + Label
```tsx
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"

<div className="flex flex-col gap-2">
  <Label htmlFor="email">Email</Label>
  <Input id="email" type="email" placeholder="you@example.com" />
</div>
```

### Dialog
```tsx
import {
  Dialog, DialogContent, DialogHeader,
  DialogTitle, DialogTrigger
} from "@/components/ui/dialog"

<Dialog>
  <DialogTrigger asChild>
    <Button variant="outline">Open</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Are you sure?</DialogTitle>
    </DialogHeader>
    <p>This action cannot be undone.</p>
  </DialogContent>
</Dialog>
```

### Badge
```tsx
import { Badge } from "@/components/ui/badge"

// Variants: default | secondary | destructive | outline
<Badge variant="secondary">TypeScript</Badge>
<Badge variant="destructive">Urgent</Badge>
```

### Sonner (Toast)
```tsx
import { toast } from "sonner"
import { Toaster } from "@/components/ui/sonner"

// Add <Toaster /> once to layout.tsx
// Then call toast() anywhere:
toast.success("Task created")
toast.error("Failed to save")
```

---

## Color Tokens

Use semantic Tailwind classes — do NOT hardcode gray/blue/red values:

| Purpose | Class | Do Not Use |
|---------|-------|------------|
| Page background | `bg-background` | `bg-white`, `bg-gray-50` |
| Primary text | `text-foreground` | `text-gray-900`, `text-black` |
| Secondary text | `text-muted-foreground` | `text-gray-500`, `text-gray-600` |
| Primary action | `bg-primary text-primary-foreground` | `bg-blue-600 text-white` |
| Danger/error | `bg-destructive text-destructive-foreground` | `bg-red-500 text-white` |
| Borders | `border-border` | `border-gray-200` |
| Card surface | `bg-card text-card-foreground` | `bg-white` |

Dark mode is automatic — Radix Colors retune under `.dark` class.

---

## Governance

**ESLint rules (hard errors in new files):**
- Importing `empty-state.tsx` → error (use Card pattern instead)
- Importing `conflict-warning.tsx` → error (use Dialog/Alert instead)
- Importing `skeleton.tsx` directly → error (use Shadcn Skeleton)

**Exempt files (migrated in Phases 10-12):**
All files in `components/tasks/`, `components/teams/`, `components/projects/`, `components/portfolio/`, `components/auth/`, `components/layout/`, `components/activity/`

**className restrictions (code review gate — not ESLint):**
New files must use semantic tokens (`bg-primary`, `text-muted-foreground`) not hardcoded Tailwind color values (`bg-blue-600`, `text-gray-500`). ESLint cannot inspect className strings — enforced via PR review.

---

## Adding New Components

```bash
# From repo root:
npx shadcn@latest add [component-name] -c ./apps/web
```

See [Shadcn UI components](https://ui.shadcn.com/docs/components) for available components.
```

Note: Replace the code fences in the markdown (the triple backtick sections) with proper markdown code blocks when writing the actual file — the above is the intended content structure.
  </action>
  <verify>
```bash
# Verify file exists and has content
wc -l apps/web/DESIGN-SYSTEM.md
# Should be 100+ lines

# Verify key sections exist
grep "Available Components" apps/web/DESIGN-SYSTEM.md
grep "Color Tokens" apps/web/DESIGN-SYSTEM.md
grep "Governance" apps/web/DESIGN-SYSTEM.md
grep "Button" apps/web/DESIGN-SYSTEM.md
```
  </verify>
  <done>DESIGN-SYSTEM.md exists with component table, usage examples for all 8 components, color token reference table, and governance section explaining ESLint rules and className code-review gate.</done>
</task>

</tasks>

<verification>
1. `cat apps/web/eslint.config.mjs` — shows governance config with no-restricted-imports
2. `grep "no-restricted-imports" apps/web/eslint.config.mjs` — rule present
3. `wc -l apps/web/DESIGN-SYSTEM.md` — 80+ lines
4. `grep "Governance" apps/web/DESIGN-SYSTEM.md` — governance section exists
5. Test governance: create temp file importing empty-state, run eslint, expect error
</verification>

<success_criteria>
- apps/web/eslint.config.mjs exists with no-restricted-imports governance rules
- Existing component files (skeleton.tsx, theme-toggle.tsx, etc.) are listed in ignores and exempt
- DESIGN-SYSTEM.md documents all 8 components with import paths and usage examples
- DESIGN-SYSTEM.md includes color token reference table and governance section
</success_criteria>

<output>
After completion, create `.planning/phases/09-design-system-foundation/09-03-SUMMARY.md` following the template at @/home/doctor/.claude/get-shit-done/templates/summary.md
</output>
