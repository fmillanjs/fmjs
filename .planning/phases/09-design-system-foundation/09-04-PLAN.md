---
phase: 09-design-system-foundation
plan: 04
type: execute
wave: 3
depends_on: ["09-01", "09-02"]
files_modified:
  - apps/web/components/ui/button.tsx
  - apps/web/components/ui/card.tsx
  - apps/web/components/ui/input.tsx
  - apps/web/components/ui/label.tsx
  - apps/web/components/ui/dialog.tsx
  - apps/web/components/ui/badge.tsx
  - apps/web/components/ui/separator.tsx
  - apps/web/components/ui/sonner.tsx
  - apps/web/app/(dashboard)/design-system/page.tsx
autonomous: false
requirements: [COMP-02]

must_haves:
  truths:
    - "8 Shadcn components installed as source files in apps/web/components/ui/"
    - "All components render without console errors in dev mode"
    - "Components visually switch between light and dark modes when theme toggle is activated"
    - "axe DevTools reports 0 color contrast violations on the /design-system page"
  artifacts:
    - path: "apps/web/components/ui/button.tsx"
      provides: "Shadcn Button component"
      min_lines: 30
    - path: "apps/web/components/ui/card.tsx"
      provides: "Shadcn Card component"
      min_lines: 30
    - path: "apps/web/app/(dashboard)/design-system/page.tsx"
      provides: "In-app verification page for all components"
      min_lines: 80
  key_links:
    - from: "apps/web/app/(dashboard)/design-system/page.tsx"
      to: "apps/web/components/ui/button.tsx"
      via: "import statement"
      pattern: "from.*@/components/ui/button"
    - from: "apps/web/components/ui/button.tsx"
      to: "apps/web/lib/utils.ts"
      via: "cn() utility import"
      pattern: "from.*@/lib/utils"
---

<objective>
Install 8 Shadcn UI primitive components in a single CLI pass, then create an in-app verification page at /design-system to confirm all components render correctly in light and dark modes.

Purpose: This plan delivers the actual components (COMP-02) and provides the verification mechanism (skip Storybook per user decision — use in-app page instead). All components must render correctly with the Radix Colors design tokens installed in Plan 02.

Output: 8 component files in apps/web/components/ui/, a design-system verification page at /design-system, and human confirmation that WCAG AA compliance is 0 violations.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-design-system-foundation/09-RESEARCH.md
@.planning/phases/09-design-system-foundation/09-01-SUMMARY.md
@.planning/phases/09-design-system-foundation/09-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Shadcn components (single pass)</name>
  <files>
    apps/web/components/ui/button.tsx
    apps/web/components/ui/card.tsx
    apps/web/components/ui/input.tsx
    apps/web/components/ui/label.tsx
    apps/web/components/ui/dialog.tsx
    apps/web/components/ui/badge.tsx
    apps/web/components/ui/separator.tsx
    apps/web/components/ui/sonner.tsx
  </files>
  <action>
From the REPO ROOT (/home/doctor/fernandomillan), run the single-pass install:

```bash
npx shadcn@latest add button card input label dialog badge separator sonner -c ./apps/web -y
```

**Component rationale (Claude's discretion per research):**
- button, card, input, label, dialog — required by user
- badge — needed for Phase 10 portfolio tech stack tags (currently `bg-gray-100 rounded-md` spans)
- separator — used in nav and layout dividers
- sonner — toast notification utility (replaces deprecated `toast` component)

**What the CLI does:**
- Installs each component as a source file in `apps/web/components/ui/{name}.tsx`
- Components are copied to your codebase (NOT a runtime dependency — you own them)
- May install peer dependencies to apps/web/package.json (@radix-ui/react-dialog, etc.)
- Does NOT modify globals.css (Plan 02 already handled this)

**After install, verify:**
```bash
ls apps/web/components/ui/button.tsx
ls apps/web/components/ui/card.tsx
ls apps/web/components/ui/input.tsx
ls apps/web/components/ui/label.tsx
ls apps/web/components/ui/dialog.tsx
ls apps/web/components/ui/badge.tsx
ls apps/web/components/ui/separator.tsx
ls apps/web/components/ui/sonner.tsx
```

**Critical: Check if TypeScript compiles after install:**
```bash
cd apps/web && npx tsc --noEmit 2>&1 | head -30
```

If there are TypeScript errors from installed components (rare but possible with new-york style + React 19), they typically come from forwardRef usage. Shadcn updated components in 2025 to remove forwardRef — the errors would be minimal. Fix any minor type errors before proceeding.

**Check for globals.css rewrite:** If the CLI modified globals.css (it may add its own variable stubs), verify the Radix Colors content from Plan 02 is intact:
```bash
grep "@custom-variant dark" apps/web/app/globals.css
grep "blue-dark.css" apps/web/app/globals.css
```

If globals.css was overwritten, restore it from Plan 02's content (the full CSS from Plan 02's action). This is the primary pitfall noted in research.
  </action>
  <verify>
```bash
# All 8 component files exist
ls apps/web/components/ui/{button,card,input,label,dialog,badge,separator,sonner}.tsx

# Components import from @/lib/utils correctly
grep "@/lib/utils" apps/web/components/ui/button.tsx

# TypeScript compiles
cd apps/web && npx tsc --noEmit 2>&1 | wc -l
# 0 lines = clean compile
```
  </verify>
  <done>All 8 component files exist in apps/web/components/ui/. TypeScript compiles without errors. globals.css Radix Colors content is intact (not overwritten by CLI).</done>
</task>

<task type="auto">
  <name>Task 2: Create in-app design system verification page</name>
  <files>apps/web/app/(dashboard)/design-system/page.tsx</files>
  <action>
Create apps/web/app/(dashboard)/design-system/page.tsx — a protected route that renders all 8 installed components so they can be visually verified in both light and dark modes.

**Why (dashboard) route group:** Uses the authenticated layout which includes the ThemeToggle in the header, allowing easy switching between light and dark. The existing layout.tsx for (dashboard) wraps with auth — this is intentional (verification requires being logged in).

```tsx
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";

export default function DesignSystemPage() {
  return (
    <div className="container mx-auto py-8 px-4 space-y-10">
      <div>
        <h1 className="text-3xl font-bold text-foreground">Design System</h1>
        <p className="text-muted-foreground mt-2">
          Shadcn UI components with Radix Colors. Toggle light/dark mode with the
          header button to verify dual-mode rendering.
        </p>
      </div>

      <Separator />

      {/* Button variants */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Button</h2>
        <div className="flex flex-wrap gap-3">
          <Button variant="default">Default</Button>
          <Button variant="secondary">Secondary</Button>
          <Button variant="destructive">Destructive</Button>
          <Button variant="outline">Outline</Button>
          <Button variant="ghost">Ghost</Button>
          <Button variant="link">Link</Button>
          <Button disabled>Disabled</Button>
        </div>
      </section>

      <Separator />

      {/* Card */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Card</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl">
          <Card>
            <CardHeader>
              <CardTitle>Project Alpha</CardTitle>
              <CardDescription>
                A card component with header and content.
              </CardDescription>
            </CardHeader>
            <CardContent>
              <p className="text-sm text-muted-foreground">
                Card content text using muted-foreground token.
              </p>
            </CardContent>
          </Card>
          <Card>
            <CardHeader>
              <CardTitle>Project Beta</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex gap-2 flex-wrap">
                <Badge>TypeScript</Badge>
                <Badge variant="secondary">React</Badge>
                <Badge variant="outline">Tailwind</Badge>
              </div>
            </CardContent>
          </Card>
        </div>
      </section>

      <Separator />

      {/* Input + Label */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Input + Label</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-xl">
          <div className="flex flex-col gap-2">
            <Label htmlFor="email">Email address</Label>
            <Input id="email" type="email" placeholder="you@example.com" />
          </div>
          <div className="flex flex-col gap-2">
            <Label htmlFor="name">Full name</Label>
            <Input id="name" type="text" placeholder="Fernando Millan" />
          </div>
          <div className="flex flex-col gap-2">
            <Label htmlFor="disabled">Disabled input</Label>
            <Input id="disabled" disabled placeholder="Cannot edit" />
          </div>
        </div>
      </section>

      <Separator />

      {/* Badge variants */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Badge</h2>
        <div className="flex flex-wrap gap-3">
          <Badge variant="default">Default</Badge>
          <Badge variant="secondary">Secondary</Badge>
          <Badge variant="destructive">Destructive</Badge>
          <Badge variant="outline">Outline</Badge>
        </div>
      </section>

      <Separator />

      {/* Dialog */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Dialog</h2>
        <Dialog>
          <DialogTrigger asChild>
            <Button variant="outline">Open Dialog</Button>
          </DialogTrigger>
          <DialogContent>
            <DialogHeader>
              <DialogTitle>Confirm action</DialogTitle>
              <DialogDescription>
                This dialog uses Radix Colors with WCAG AA compliant text contrast.
                Toggle dark mode to verify both modes render correctly.
              </DialogDescription>
            </DialogHeader>
            <div className="flex justify-end gap-3 mt-4">
              <Button variant="outline">Cancel</Button>
              <Button variant="destructive">Confirm delete</Button>
            </div>
          </DialogContent>
        </Dialog>
      </section>

      <Separator />

      {/* Color token reference */}
      <section className="space-y-4">
        <h2 className="text-xl font-semibold text-foreground">Color Tokens</h2>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          {[
            { name: "background", bg: "bg-background", border: true },
            { name: "card", bg: "bg-card", border: true },
            { name: "primary", bg: "bg-primary" },
            { name: "secondary", bg: "bg-secondary", border: true },
            { name: "muted", bg: "bg-muted", border: true },
            { name: "accent", bg: "bg-accent", border: true },
            { name: "destructive", bg: "bg-destructive" },
            { name: "border", bg: "bg-border" },
          ].map(({ name, bg, border }) => (
            <div
              key={name}
              className={`h-16 rounded-md flex items-center justify-center text-xs font-medium ${bg} ${border ? "border border-border" : ""}`}
            >
              <span className="text-foreground mix-blend-difference">{name}</span>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
}
```

After creating the file, verify TypeScript compilation:
```bash
cd apps/web && npx tsc --noEmit 2>&1 | head -20
```

Fix any import or type errors before proceeding to the checkpoint.
  </action>
  <verify>
```bash
# File exists and has content
wc -l apps/web/app/(dashboard)/design-system/page.tsx
# Should be 100+ lines

# All component imports resolve
grep "from.*@/components/ui" apps/web/app/\(dashboard\)/design-system/page.tsx | wc -l
# Should be 6+ unique imports

# TypeScript compiles
cd apps/web && npx tsc --noEmit 2>&1 | head -5
```
  </verify>
  <done>Design system page exists at apps/web/app/(dashboard)/design-system/page.tsx, imports all 8 Shadcn components, TypeScript compiles clean.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Human visual verification — components in light and dark mode</name>
  <what-built>
8 Shadcn UI components installed (button, card, input, label, dialog, badge, separator, sonner), plus an in-app design system verification page at /design-system. The page renders all components using Radix Colors design tokens from Plan 02.
  </what-built>
  <how-to-verify>
1. Start the dev server (check if Docker container is already running: `docker ps | grep fernandomillan`; if not, `npm run dev` from repo root)
2. Log in to the app (visit http://localhost:3000/login)
3. Navigate to http://localhost:3000/design-system
4. Verify in LIGHT mode:
   - All component sections render (Button, Card, Input, Label, Dialog, Badge, Separator visible)
   - Colors look professional and clearly visible (not washed out)
   - Button variants are visually distinct
   - Card background is slightly off-white (slate-2, not pure white)
   - Input borders are visible (darker than background)
   - Badge colors are clear and readable
5. Toggle to DARK mode (use theme toggle in header):
   - All components update to dark palette automatically
   - Colors are distinct and readable in dark
   - No component remains light-themed (all shift)
   - Card surface is dark slate, not pure black
6. Open the Dialog (click "Open Dialog" button):
   - Modal overlays with backdrop
   - Text is readable in both light and dark
   - Destructive button is red/readable
7. Run axe DevTools browser extension (install from Chrome Web Store if needed):
   - Analyze the /design-system page
   - Target: 0 color contrast violations
   - If violations appear, note which component and report below
  </how-to-verify>
  <action>Human visual verification — no automated action required. Follow the how-to-verify steps below.</action>
  <verify>Visit http://localhost:3000/design-system, toggle light/dark mode, run axe DevTools. Report 0 contrast violations and correct rendering in both modes.</verify>
  <done>All 8 components render correctly in light and dark modes. axe DevTools reports 0 color contrast violations on the /design-system page.</done>
  <resume-signal>
Type "approved" if all components render correctly in both light and dark mode with 0 axe contrast violations.
Or describe any issues found (which component, what mode, what problem) so they can be fixed.
  </resume-signal>
</task>

</tasks>

<verification>
1. `ls apps/web/components/ui/*.tsx | wc -l` — at least 8 new component files
2. `cd apps/web && npx tsc --noEmit` — clean TypeScript compilation
3. `ls apps/web/app/\(dashboard\)/design-system/page.tsx` — verification page exists
4. Human checkpoint: visual verification at /design-system in both light and dark modes
5. Human checkpoint: axe DevTools reports 0 contrast violations
</verification>

<success_criteria>
- All 8 components installed as source files in apps/web/components/ui/
- TypeScript compiles without errors after installation
- /design-system page renders all components without console errors
- Human verifies: components render correctly in light mode
- Human verifies: components render correctly in dark mode (Radix dark scales applied)
- Human verifies: axe DevTools shows 0 color contrast violations on /design-system page
</success_criteria>

<output>
After completion, create `.planning/phases/09-design-system-foundation/09-04-SUMMARY.md` following the template at @/home/doctor/.claude/get-shit-done/templates/summary.md
</output>
