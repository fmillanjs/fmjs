---
phase: 36-content-update
plan: "03"
type: execute
wave: 2
depends_on:
  - "36-01"
  - "36-02"
files_modified:
  - apps/web/app/(portfolio)/page.tsx
  - apps/web/app/(portfolio)/projects/page.tsx
  - apps/web/components/portfolio/project-card.tsx
  - apps/web/app/(portfolio)/projects/teamflow/page.tsx
  - apps/web/app/(portfolio)/projects/devcollab/page.tsx
  - apps/web/public/screenshots/teamflow-kanban.png
  - apps/web/public/screenshots/teamflow-presence.png
  - apps/web/public/screenshots/devcollab-workspace.png
  - apps/web/public/screenshots/devcollab-search.png
autonomous: false
requirements:
  - CONT-03
  - CONT-04

must_haves:
  truths:
    - "Tech stack badges on TeamFlow home card and projects card show Socket.io not WebSocket"
    - "Tech stack badges on DevCollab home card and projects card show react-markdown not Tiptap"
    - "Both home card badge arrays and projects page badge arrays match each other (consistent)"
    - "Four screenshots exist in apps/web/public/screenshots/ (two per app) captured from live production URLs"
    - "Both case study pages show the screenshots using Next.js Image component with explicit width/height"
    - "Project cards on /projects show screenshots via an updated ProjectCard screenshot prop"
    - "Lighthouse CI gate remains green — no CLS regression from image additions"
  artifacts:
    - path: "apps/web/public/screenshots/teamflow-kanban.png"
      provides: "TeamFlow Kanban board screenshot captured at 1280x800 from live production"
    - path: "apps/web/public/screenshots/teamflow-presence.png"
      provides: "TeamFlow presence indicator screenshot from live production"
    - path: "apps/web/public/screenshots/devcollab-workspace.png"
      provides: "DevCollab workspace/snippet list screenshot from live production"
    - path: "apps/web/public/screenshots/devcollab-search.png"
      provides: "DevCollab Cmd+K search modal screenshot from live production"
    - path: "apps/web/components/portfolio/project-card.tsx"
      provides: "ProjectCard with optional screenshot prop"
      exports: ["ProjectCard"]
    - path: "apps/web/app/(portfolio)/projects/page.tsx"
      provides: "Projects listing with corrected badge arrays and screenshot props"
      contains: "Socket.io"
    - path: "apps/web/app/(portfolio)/page.tsx"
      provides: "Home page with corrected badge arrays"
      contains: "Socket.io"
  key_links:
    - from: "apps/web/app/(portfolio)/projects/page.tsx"
      to: "apps/web/components/portfolio/project-card.tsx"
      via: "screenshot prop passed to ProjectCard"
      pattern: "screenshot="
    - from: "apps/web/app/(portfolio)/projects/teamflow/page.tsx"
      to: "apps/web/public/screenshots/teamflow-kanban.png"
      via: "Next.js Image src prop"
      pattern: "/screenshots/teamflow-kanban"
---

<objective>
Fix all tech stack badge arrays across the portfolio (home page, projects page), add a screenshot prop to ProjectCard, capture 4 live screenshots, and wire them into both case studies and the project cards.

Purpose: After the copy rewrites in plans 01 and 02, the badge arrays on the home page and projects listing still have inaccuracies ("WebSocket" instead of "Socket.io", "Tiptap" instead of "react-markdown"). And no screenshots exist anywhere — CONT-04 requires live app screenshots in both case studies and project cards.

Output: Corrected badge arrays throughout; ProjectCard extended with optional screenshot prop; 4 screenshots captured from production and displayed in case studies and project cards.
</objective>

<execution_context>
@/home/doctor/.claude/get-shit-done/workflows/execute-plan.md
@/home/doctor/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/36-content-update/36-01-SUMMARY.md
@.planning/phases/36-content-update/36-02-SUMMARY.md

@apps/web/app/(portfolio)/page.tsx
@apps/web/app/(portfolio)/projects/page.tsx
@apps/web/components/portfolio/project-card.tsx
@apps/web/app/(portfolio)/projects/teamflow/page.tsx
@apps/web/app/(portfolio)/projects/devcollab/page.tsx
</context>

<interfaces>
<!-- Current badge arrays (confirmed from codebase audit) and corrected versions -->

**apps/web/app/(portfolio)/page.tsx — TeamFlow home card badges (lines 64-79):**
Current: ['Next.js', 'NestJS', 'TypeScript', 'WebSocket', 'PostgreSQL', 'Prisma', 'Redis', 'Docker', 'Tailwind']
Corrected: ['Next.js 15', 'NestJS', 'TypeScript', 'Socket.io', 'PostgreSQL', 'Prisma', 'Redis', 'CASL', 'Docker', 'Tailwind']

**apps/web/app/(portfolio)/page.tsx — DevCollab home card badges (lines 113-122):**
Current: ['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Tiptap', 'Shiki', 'Docker', 'Tailwind']
Corrected: ['Next.js 15', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'react-markdown', 'Shiki', 'Docker', 'Tailwind']

**apps/web/app/(portfolio)/projects/page.tsx — TeamFlow ProjectCard badges (line 22):**
Current: ['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Redis', 'WebSocket']
Corrected: ['Next.js 15', 'NestJS', 'TypeScript', 'Socket.io', 'PostgreSQL', 'Redis', 'Prisma', 'Docker']

**apps/web/app/(portfolio)/projects/page.tsx — DevCollab ProjectCard badges (line 31):**
Current: ['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'Tiptap', 'Shiki']
Corrected: ['Next.js 15', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'react-markdown', 'Shiki', 'Docker']

**apps/web/components/portfolio/project-card.tsx — current interface:**
```typescript
interface ProjectCardProps {
  title: string
  description: string
  techStack: string[]
  href: string
  featured?: boolean
}
```
Must add:
```typescript
  screenshot?: { src: string; alt: string }
```

**Screenshot files to capture (production URLs, authenticated where needed):**
- teamflow-kanban.png: Log into https://teamflow.fernandomillan.me with demo1@teamflow.dev / Password123, navigate to the project Kanban board
- teamflow-presence.png: While logged in, screenshot showing presence indicators (green dots or user avatars showing who's online)
- devcollab-workspace.png: Log into https://devcollab.fernandomillan.me with admin@demo.devcollab / Demo1234!, navigate to the devcollab-demo workspace snippet list
- devcollab-search.png: While in workspace, open Cmd+K search modal

**Screenshot requirements:**
- Viewport: 1280x800 pixels
- Format: PNG
- Output directory: apps/web/public/screenshots/ (must be created)
- All must show real content, not empty states

**Next.js Image — correct usage pattern (no CLS regression):**
```tsx
import Image from 'next/image';

<Image
  src="/screenshots/teamflow-kanban.png"
  alt="TeamFlow Kanban board with tasks organized in Todo, In Progress, and Done columns"
  width={1280}
  height={800}
  className="rounded-lg border border-border w-full h-auto"
/>
```
Always provide explicit width + height to prevent CLS. Do NOT use priority={true} on below-fold images.
</interfaces>

<tasks>

<task type="auto">
  <name>Task 1: Fix badge arrays on home page and projects listing</name>
  <files>
    apps/web/app/(portfolio)/page.tsx
    apps/web/app/(portfolio)/projects/page.tsx
  </files>
  <action>
Apply the corrected badge arrays from the interfaces section to both files.

**In apps/web/app/(portfolio)/page.tsx:**
Replace the TeamFlow card badge array (around line 64):
```tsx
{['Next.js', 'NestJS', 'TypeScript', 'WebSocket', 'PostgreSQL', 'Prisma', 'Redis', 'Docker', 'Tailwind'].map(...)}
```
With:
```tsx
{['Next.js 15', 'NestJS', 'TypeScript', 'Socket.io', 'PostgreSQL', 'Prisma', 'Redis', 'CASL', 'Docker', 'Tailwind'].map(...)}
```

Replace the DevCollab card badge array (around line 113):
```tsx
{['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Tiptap', 'Shiki', 'Docker', 'Tailwind'].map(...)}
```
With:
```tsx
{['Next.js 15', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'react-markdown', 'Shiki', 'Docker', 'Tailwind'].map(...)}
```

Also update the DevCollab description text in page.tsx (around line 104-109) which currently says "Markdown posts with Tiptap editor" — change to "Markdown posts with react-markdown" to match the plan 01 fix applied to the case study.

**In apps/web/app/(portfolio)/projects/page.tsx:**
Replace TeamFlow techStack prop:
```tsx
techStack={['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Redis', 'WebSocket']}
```
With:
```tsx
techStack={['Next.js 15', 'NestJS', 'TypeScript', 'Socket.io', 'PostgreSQL', 'Redis', 'Prisma', 'Docker']}
```

Replace DevCollab techStack prop:
```tsx
techStack={['Next.js', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'Tiptap', 'Shiki']}
```
With:
```tsx
techStack={['Next.js 15', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'react-markdown', 'Shiki', 'Docker']}
```
  </action>
  <verify>
    <automated>grep -c "WebSocket\|Tiptap" /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/page.tsx /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/page.tsx || echo "0 stale badges"</automated>
  </verify>
  <done>Zero occurrences of "WebSocket" (as badge) or "Tiptap" remain in page.tsx or projects/page.tsx; "Socket.io" and "react-markdown" appear in their place</done>
</task>

<task type="auto">
  <name>Task 2: Add screenshot prop to ProjectCard and capture live screenshots</name>
  <files>
    apps/web/components/portfolio/project-card.tsx
    apps/web/public/screenshots/teamflow-kanban.png
    apps/web/public/screenshots/teamflow-presence.png
    apps/web/public/screenshots/devcollab-workspace.png
    apps/web/public/screenshots/devcollab-search.png
  </files>
  <action>
**Part A: Extend ProjectCard with optional screenshot prop**

Edit apps/web/components/portfolio/project-card.tsx:

1. Add `import Image from 'next/image'` at the top (after existing imports)
2. Add `screenshot?: { src: string; alt: string }` to the ProjectCardProps interface
3. Add screenshot prop to the function signature
4. Inside CardHeader, BEFORE the `{featured && ...}` block, add:
```tsx
{screenshot && (
  <div className="mb-4 overflow-hidden rounded-md">
    <Image
      src={screenshot.src}
      alt={screenshot.alt}
      width={1280}
      height={800}
      className="w-full h-auto object-cover"
    />
  </div>
)}
```

**Part B: Create screenshots directory and capture live screenshots using Playwright**

Create the directory:
```bash
mkdir -p /home/doctor/fernandomillan/apps/web/public/screenshots
```

Write a temporary capture script at `/home/doctor/fernandomillan/scripts/capture-screenshots.mjs`:
```javascript
import { chromium } from 'playwright';
import path from 'path';
import { fileURLToPath } from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));
const outDir = path.join(__dirname, '../apps/web/public/screenshots');

const browser = await chromium.launch({ headless: true });
const page = await browser.newPage();
await page.setViewportSize({ width: 1280, height: 800 });

// TeamFlow: Login and capture Kanban board
console.log('Capturing TeamFlow Kanban...');
await page.goto('https://teamflow.fernandomillan.me', { waitUntil: 'networkidle', timeout: 30000 });
// Fill login form if redirected to login
if (page.url().includes('/login') || page.url().includes('/signin') || page.url() === 'https://teamflow.fernandomillan.me/') {
  // Try to find and fill login form
  const emailInput = page.locator('input[type="email"], input[name="email"]').first();
  const passwordInput = page.locator('input[type="password"]').first();
  if (await emailInput.isVisible({ timeout: 5000 }).catch(() => false)) {
    await emailInput.fill('demo1@teamflow.dev');
    await passwordInput.fill('Password123');
    await page.keyboard.press('Enter');
    await page.waitForNavigation({ waitUntil: 'networkidle', timeout: 15000 }).catch(() => {});
  }
}
await page.waitForTimeout(2000);
await page.screenshot({ path: path.join(outDir, 'teamflow-kanban.png'), fullPage: false });
console.log('teamflow-kanban.png captured');

// TeamFlow: Presence indicator screenshot (same page, look for presence)
await page.screenshot({ path: path.join(outDir, 'teamflow-presence.png'), fullPage: false });
console.log('teamflow-presence.png captured');

// DevCollab: Login and capture workspace
console.log('Capturing DevCollab workspace...');
const page2 = await browser.newPage();
await page2.setViewportSize({ width: 1280, height: 800 });
await page2.goto('https://devcollab.fernandomillan.me', { waitUntil: 'networkidle', timeout: 30000 });
const emailInput2 = page2.locator('input[type="email"], input[name="email"]').first();
const passwordInput2 = page2.locator('input[type="password"]').first();
if (await emailInput2.isVisible({ timeout: 5000 }).catch(() => false)) {
  await emailInput2.fill('admin@demo.devcollab');
  await passwordInput2.fill('Demo1234!');
  await page2.keyboard.press('Enter');
  await page2.waitForNavigation({ waitUntil: 'networkidle', timeout: 15000 }).catch(() => {});
}
await page2.waitForTimeout(2000);
await page2.screenshot({ path: path.join(outDir, 'devcollab-workspace.png'), fullPage: false });
console.log('devcollab-workspace.png captured');

// DevCollab: Open Cmd+K search
await page2.keyboard.press('Meta+k');
await page2.waitForTimeout(1000);
await page2.screenshot({ path: path.join(outDir, 'devcollab-search.png'), fullPage: false });
console.log('devcollab-search.png captured');

await browser.close();
console.log('All screenshots captured successfully');
```

Run the capture script:
```bash
cd /home/doctor/fernandomillan && node scripts/capture-screenshots.mjs
```

If the script fails due to login form selectors not matching, try navigating directly to the authenticated page:
- TeamFlow Kanban: `https://teamflow.fernandomillan.me/teams` or the project URL
- DevCollab workspace: `https://devcollab.fernandomillan.me/w/devcollab-demo`

Verify all 4 PNG files exist and are non-empty (>10KB) after the script runs.
  </action>
  <verify>
    <automated>ls -la /home/doctor/fernandomillan/apps/web/public/screenshots/*.png 2>/dev/null | wc -l</automated>
  </verify>
  <done>4 PNG files exist in apps/web/public/screenshots/; ProjectCard accepts optional screenshot prop; no TypeScript errors in project-card.tsx</done>
</task>

<task type="auto">
  <name>Task 3: Wire screenshots into case study pages and project cards</name>
  <files>
    apps/web/app/(portfolio)/projects/teamflow/page.tsx
    apps/web/app/(portfolio)/projects/devcollab/page.tsx
    apps/web/app/(portfolio)/projects/page.tsx
  </files>
  <action>
**Part A: Add screenshot sections to case study pages**

In apps/web/app/(portfolio)/projects/teamflow/page.tsx:
Add `import Image from 'next/image';` at the top (after existing imports).
Add a new CaseStudySection titled "Screenshots" BEFORE the Results section:
```tsx
<CaseStudySection title="Screenshots">
  <div className="grid md:grid-cols-2 gap-4 mt-4">
    <div>
      <Image
        src="/screenshots/teamflow-kanban.png"
        alt="TeamFlow Kanban board with tasks organized in Todo, In Progress, and Done columns"
        width={1280}
        height={800}
        className="rounded-lg border border-border w-full h-auto"
      />
      <p className="text-sm text-muted-foreground mt-2">Kanban board with drag-and-drop task management</p>
    </div>
    <div>
      <Image
        src="/screenshots/teamflow-presence.png"
        alt="TeamFlow dashboard showing real-time presence indicators for online team members"
        width={1280}
        height={800}
        className="rounded-lg border border-border w-full h-auto"
      />
      <p className="text-sm text-muted-foreground mt-2">Real-time presence indicators via Socket.io</p>
    </div>
  </div>
</CaseStudySection>
```

In apps/web/app/(portfolio)/projects/devcollab/page.tsx:
Add `import Image from 'next/image';` at the top (after existing imports).
Add a new CaseStudySection titled "Screenshots" BEFORE the Results section:
```tsx
<CaseStudySection title="Screenshots">
  <div className="grid md:grid-cols-2 gap-4 mt-4">
    <div>
      <Image
        src="/screenshots/devcollab-workspace.png"
        alt="DevCollab workspace showing code snippets with syntax highlighting"
        width={1280}
        height={800}
        className="rounded-lg border border-border w-full h-auto"
      />
      <p className="text-sm text-muted-foreground mt-2">Workspace snippet list with Shiki syntax highlighting</p>
    </div>
    <div>
      <Image
        src="/screenshots/devcollab-search.png"
        alt="DevCollab Cmd+K search modal showing full-text search results"
        width={1280}
        height={800}
        className="rounded-lg border border-border w-full h-auto"
      />
      <p className="text-sm text-muted-foreground mt-2">Cmd+K full-text search across all workspace content</p>
    </div>
  </div>
</CaseStudySection>
```

**Part B: Add screenshot props to ProjectCard usages in projects/page.tsx**

In apps/web/app/(portfolio)/projects/page.tsx, add screenshot props to both ProjectCard usages:
```tsx
<ProjectCard
  title="TeamFlow"
  description="A production-ready work management SaaS with real-time collaboration"
  techStack={['Next.js 15', 'NestJS', 'TypeScript', 'Socket.io', 'PostgreSQL', 'Redis', 'Prisma', 'Docker']}
  href="/projects/teamflow"
  featured
  screenshot={{ src: '/screenshots/teamflow-kanban.png', alt: 'TeamFlow Kanban board' }}
/>

<ProjectCard
  title="DevCollab"
  description="A developer collaboration platform with code snippets, Markdown posts, full-text search, and role-based workspaces"
  techStack={['Next.js 15', 'NestJS', 'TypeScript', 'PostgreSQL', 'Prisma', 'react-markdown', 'Shiki', 'Docker']}
  href="/projects/devcollab"
  featured
  screenshot={{ src: '/screenshots/devcollab-workspace.png', alt: 'DevCollab workspace' }}
/>
```
  </action>
  <verify>
    <automated>grep -c "screenshots/" /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/teamflow/page.tsx /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/devcollab/page.tsx /home/doctor/fernandomillan/apps/web/app/\(portfolio\)/projects/page.tsx</automated>
  </verify>
  <done>At least 2 screenshot references exist in teamflow/page.tsx, at least 2 in devcollab/page.tsx, and screenshot props are passed in projects/page.tsx</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 4: Human visual verification of all content updates</name>
  <what-built>
    All content updates complete:
    - DevCollab case study: Tiptap removed, react-markdown described accurately (plan 01)
    - TeamFlow case study: v1.1 framing removed, real-time presented as shipped (plan 02)
    - Badge arrays corrected: Socket.io, react-markdown, Prisma, CASL across home + projects pages
    - 4 screenshots captured from live production apps
    - Screenshots wired into both case studies (Screenshots section) and project cards on /projects
  </what-built>
  <how-to-verify>
    1. Visit https://fernandomillan.me — check TeamFlow and DevCollab cards. Badge arrays should show "Socket.io" (not "WebSocket") and "react-markdown" (not "Tiptap").

    2. Visit https://fernandomillan.me/projects — both ProjectCards should show a screenshot image at the top of each card.

    3. Visit https://fernandomillan.me/projects/teamflow — confirm:
       - No "v1.1", "88%", or "blocked by auth" language anywhere
       - Real-time features listed as shipped checkmarks
       - Screenshots section visible with 2 images
       - Challenge 1 describes a solved production auth problem

    4. Visit https://fernandomillan.me/projects/devcollab — confirm:
       - No "Tiptap" anywhere in the page
       - "react-markdown" appears in features list and tech stack
       - Screenshots section visible with 2 images

    5. Check Lighthouse (optional but recommended): Run `npx lhci autorun --config apps/web/.lighthouserc.production.json` to confirm performance scores remain >= 0.90 on all 5 URLs after image additions.
  </how-to-verify>
  <resume-signal>Type "approved" if all 4 pages look correct and no visual regressions are visible, or describe any issues found</resume-signal>
  <action>Human verification — navigate to the 4 URLs listed in how-to-verify and confirm content accuracy and screenshot display.</action>
  <verify><automated>echo "Human checkpoint — no automated verify"</automated></verify>
  <done>Human confirms badge arrays accurate, screenshots visible in case studies and project cards, no stale v1.1 or Tiptap language visible on live site</done>
</task>

</tasks>

<verification>
After all tasks and checkpoint complete:
1. `grep -r "WebSocket" apps/web/app/(portfolio)/page.tsx apps/web/app/(portfolio)/projects/page.tsx` returns no badge-context occurrences
2. `grep -r "Tiptap" apps/web/app/(portfolio)/page.tsx apps/web/app/(portfolio)/projects/page.tsx apps/web/app/(portfolio)/projects/devcollab/page.tsx` returns 0
3. `ls apps/web/public/screenshots/*.png | wc -l` returns 4
4. `grep -c "screenshots/" apps/web/app/(portfolio)/projects/teamflow/page.tsx` returns >= 2
5. `grep -c "screenshots/" apps/web/app/(portfolio)/projects/devcollab/page.tsx` returns >= 2
6. Human checkpoint approved
</verification>

<success_criteria>
- CONT-03 satisfied: Badge arrays on home page, projects page, and case studies show accurate actual stack (Socket.io, react-markdown, Prisma, CASL — no WebSocket badge, no Tiptap badge)
- CONT-04 satisfied: 4 screenshots from live production apps exist in public/screenshots/ and are displayed in both case studies and project cards
- No Lighthouse regression — images use explicit width/height props, no CLS introduced
- All four requirements (CONT-01 through CONT-04) across Phase 36 are complete
</success_criteria>

<output>
After completion, create `.planning/phases/36-content-update/36-03-SUMMARY.md` using the summary template.
</output>
